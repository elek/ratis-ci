2019-09-26 13:34:56,264 INFO  util.LogUtils (LogUtils.java:setLogLevel(41)) - Set org.apache.ratis.conf.ConfUtils log level to WARN
2019-09-26 13:34:56,268 INFO  util.LogUtils (LogUtils.java:setLogLevel(41)) - Set org.apache.ratis.util.FileUtils log level to TRACE
2019-09-26 13:34:56,277 INFO  logservice.LogServiceReadWriteBase (LogServiceReadWriteBase.java:<init>(65)) - Set LogStateMachine OK
2019-09-26 13:34:56,350 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:<init>(253)) - new MiniRaftClusterWithGrpc with group-131BA2B77B0E:[s0:0.0.0.0:44678, s1:0.0.0.0:43172, s2:0.0.0.0:38192]
2019-09-26 13:34:56,350 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:start(287)) - .............................................................. 
2019-09-26 13:34:56,350 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:start(288)) - ... 
2019-09-26 13:34:56,350 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:start(289)) - ...     Starting MiniRaftClusterWithGrpc
2019-09-26 13:34:56,351 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:start(290)) - ... 
2019-09-26 13:34:56,351 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:start(291)) - .............................................................. 
2019-09-26 13:34:56,351 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:initServers(265)) - servers = {}
2019-09-26 13:34:56,361 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(330)) - newRaftServer: s0, group-131BA2B77B0E:[s0:0.0.0.0:44678, s1:0.0.0.0:43172, s2:0.0.0.0:38192], format? true
2019-09-26 13:34:56,364 TRACE util.FileUtils (FileUtils.java:deleteFully(88)) - deleteFully target/test/data/edf3c5cf/MiniRaftClusterWithGrpc540c2221/s0
2019-09-26 13:34:56,371 TRACE util.FileUtils (FileUtils.java:deleteFully(104)) - deleteFully: target/test/data/edf3c5cf/MiniRaftClusterWithGrpc540c2221/s0 does not exist.
2019-09-26 13:34:56,372 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(335)) - Formatted directory target/test/data/edf3c5cf/MiniRaftClusterWithGrpc540c2221/s0
2019-09-26 13:34:56,395 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-09-26 13:34:56,478 INFO  grpc.GrpcFactory (GrpcFactory.java:checkPooledByteBufAllocatorUseCacheForAllThreads(45)) - PERFORMANCE WARNING: useCacheForAllThreads is true that may cause Netty to create a lot garbage objects and, as a result, trigger GC.
	It is recommended to disable useCacheForAllThreads by setting -Dorg.apache.ratis.thirdparty.io.netty.allocator.useCacheForAllThreads=false in command line.
2019-09-26 13:34:56,485 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 44678 (custom)
2019-09-26 13:34:56,488 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2019-09-26 13:34:56,491 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-26 13:34:56,492 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-09-26 13:34:56,497 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-09-26 13:34:56,682 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc540c2221/s0] (custom)
2019-09-26 13:34:56,696 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - s0: addNew group-131BA2B77B0E:[s0:0.0.0.0:44678, s1:0.0.0.0:43172, s2:0.0.0.0:38192] returns group-131BA2B77B0E:java.util.concurrent.CompletableFuture@6d87225c[Not completed]
2019-09-26 13:34:56,696 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(330)) - newRaftServer: s1, group-131BA2B77B0E:[s0:0.0.0.0:44678, s1:0.0.0.0:43172, s2:0.0.0.0:38192], format? true
2019-09-26 13:34:56,696 TRACE util.FileUtils (FileUtils.java:deleteFully(88)) - deleteFully target/test/data/edf3c5cf/MiniRaftClusterWithGrpc540c2221/s1
2019-09-26 13:34:56,697 TRACE util.FileUtils (FileUtils.java:deleteFully(104)) - deleteFully: target/test/data/edf3c5cf/MiniRaftClusterWithGrpc540c2221/s1 does not exist.
2019-09-26 13:34:56,697 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(335)) - Formatted directory target/test/data/edf3c5cf/MiniRaftClusterWithGrpc540c2221/s1
2019-09-26 13:34:56,698 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-09-26 13:34:56,698 INFO  grpc.GrpcFactory (GrpcFactory.java:checkPooledByteBufAllocatorUseCacheForAllThreads(45)) - PERFORMANCE WARNING: useCacheForAllThreads is true that may cause Netty to create a lot garbage objects and, as a result, trigger GC.
	It is recommended to disable useCacheForAllThreads by setting -Dorg.apache.ratis.thirdparty.io.netty.allocator.useCacheForAllThreads=false in command line.
2019-09-26 13:34:56,698 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 43172 (custom)
2019-09-26 13:34:56,698 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2019-09-26 13:34:56,699 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-26 13:34:56,699 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-09-26 13:34:56,699 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-09-26 13:34:56,700 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc540c2221/s1] (custom)
2019-09-26 13:34:56,701 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - s1: addNew group-131BA2B77B0E:[s0:0.0.0.0:44678, s1:0.0.0.0:43172, s2:0.0.0.0:38192] returns group-131BA2B77B0E:java.util.concurrent.CompletableFuture@68772b32[Not completed]
2019-09-26 13:34:56,701 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(330)) - newRaftServer: s2, group-131BA2B77B0E:[s0:0.0.0.0:44678, s1:0.0.0.0:43172, s2:0.0.0.0:38192], format? true
2019-09-26 13:34:56,701 TRACE util.FileUtils (FileUtils.java:deleteFully(88)) - deleteFully target/test/data/edf3c5cf/MiniRaftClusterWithGrpc540c2221/s2
2019-09-26 13:34:56,701 TRACE util.FileUtils (FileUtils.java:deleteFully(104)) - deleteFully: target/test/data/edf3c5cf/MiniRaftClusterWithGrpc540c2221/s2 does not exist.
2019-09-26 13:34:56,702 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(335)) - Formatted directory target/test/data/edf3c5cf/MiniRaftClusterWithGrpc540c2221/s2
2019-09-26 13:34:56,702 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-09-26 13:34:56,702 INFO  grpc.GrpcFactory (GrpcFactory.java:checkPooledByteBufAllocatorUseCacheForAllThreads(45)) - PERFORMANCE WARNING: useCacheForAllThreads is true that may cause Netty to create a lot garbage objects and, as a result, trigger GC.
	It is recommended to disable useCacheForAllThreads by setting -Dorg.apache.ratis.thirdparty.io.netty.allocator.useCacheForAllThreads=false in command line.
2019-09-26 13:34:56,703 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 38192 (custom)
2019-09-26 13:34:56,703 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2019-09-26 13:34:56,703 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-26 13:34:56,704 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-09-26 13:34:56,704 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-09-26 13:34:56,705 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc540c2221/s2] (custom)
2019-09-26 13:34:56,705 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - s2: addNew group-131BA2B77B0E:[s0:0.0.0.0:44678, s1:0.0.0.0:43172, s2:0.0.0.0:38192] returns group-131BA2B77B0E:java.util.concurrent.CompletableFuture@3862fa77[Not completed]
2019-09-26 13:34:56,707 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(95)) - s2: new RaftServerImpl for group-131BA2B77B0E:[s0:0.0.0.0:44678, s1:0.0.0.0:43172, s2:0.0.0.0:38192] with LogStateMachine:uninitialized
2019-09-26 13:34:56,707 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(95)) - s1: new RaftServerImpl for group-131BA2B77B0E:[s0:0.0.0.0:44678, s1:0.0.0.0:43172, s2:0.0.0.0:38192] with LogStateMachine:uninitialized
2019-09-26 13:34:56,707 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(95)) - s0: new RaftServerImpl for group-131BA2B77B0E:[s0:0.0.0.0:44678, s1:0.0.0.0:43172, s2:0.0.0.0:38192] with LogStateMachine:uninitialized
2019-09-26 13:34:56,709 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 150ms (default)
2019-09-26 13:34:56,709 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 150ms (default)
2019-09-26 13:34:56,709 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 150ms (default)
2019-09-26 13:34:56,709 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 300ms (default)
2019-09-26 13:34:56,709 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 300ms (default)
2019-09-26 13:34:56,709 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 300ms (default)
2019-09-26 13:34:56,709 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 60s (default)
2019-09-26 13:34:56,709 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 60s (default)
2019-09-26 13:34:56,710 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 60s (default)
2019-09-26 13:34:56,710 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.sleep.deviation.threshold = 300 (default)
2019-09-26 13:34:56,710 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.sleep.deviation.threshold = 300 (default)
2019-09-26 13:34:56,711 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.sleep.deviation.threshold = 300 (default)
2019-09-26 13:34:56,711 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-09-26 13:34:56,711 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-09-26 13:34:56,711 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-09-26 13:34:56,717 INFO  impl.RaftServerImpl (ServerState.java:<init>(103)) - s0@group-131BA2B77B0E: ConfigurationManager, init=-1: [s0:0.0.0.0:44678, s1:0.0.0.0:43172, s2:0.0.0.0:38192], old=null, confs=<EMPTY_MAP>
2019-09-26 13:34:56,717 INFO  impl.RaftServerImpl (ServerState.java:<init>(103)) - s1@group-131BA2B77B0E: ConfigurationManager, init=-1: [s0:0.0.0.0:44678, s1:0.0.0.0:43172, s2:0.0.0.0:38192], old=null, confs=<EMPTY_MAP>
2019-09-26 13:34:56,718 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc540c2221/s0] (custom)
2019-09-26 13:34:56,717 INFO  impl.RaftServerImpl (ServerState.java:<init>(103)) - s2@group-131BA2B77B0E: ConfigurationManager, init=-1: [s0:0.0.0.0:44678, s1:0.0.0.0:43172, s2:0.0.0.0:38192], old=null, confs=<EMPTY_MAP>
2019-09-26 13:34:56,718 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc540c2221/s1] (custom)
2019-09-26 13:34:56,718 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc540c2221/s2] (custom)
2019-09-26 13:34:56,728 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.corruption.policy = EXCEPTION (default)
2019-09-26 13:34:56,728 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.corruption.policy = EXCEPTION (default)
2019-09-26 13:34:56,728 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.corruption.policy = EXCEPTION (default)
2019-09-26 13:34:56,729 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc540c2221/s2/28865c8b-4512-47c7-bb3c-131ba2b77b0e does not exist. Creating ...
2019-09-26 13:34:56,729 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc540c2221/s1/28865c8b-4512-47c7-bb3c-131ba2b77b0e does not exist. Creating ...
2019-09-26 13:34:56,729 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc540c2221/s0/28865c8b-4512-47c7-bb3c-131ba2b77b0e does not exist. Creating ...
2019-09-26 13:34:56,732 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc540c2221/s2/28865c8b-4512-47c7-bb3c-131ba2b77b0e
2019-09-26 13:34:56,732 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc540c2221/s0/28865c8b-4512-47c7-bb3c-131ba2b77b0e
2019-09-26 13:34:56,732 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc540c2221/s1/28865c8b-4512-47c7-bb3c-131ba2b77b0e
2019-09-26 13:34:56,747 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc540c2221/s0/28865c8b-4512-47c7-bb3c-131ba2b77b0e/in_use.lock acquired by nodename 10855@ratis-test-j9cz4-1458154678
2019-09-26 13:34:56,747 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc540c2221/s1/28865c8b-4512-47c7-bb3c-131ba2b77b0e/in_use.lock acquired by nodename 10855@ratis-test-j9cz4-1458154678
2019-09-26 13:34:56,747 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc540c2221/s2/28865c8b-4512-47c7-bb3c-131ba2b77b0e/in_use.lock acquired by nodename 10855@ratis-test-j9cz4-1458154678
2019-09-26 13:34:56,748 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc540c2221/s0/28865c8b-4512-47c7-bb3c-131ba2b77b0e/current
2019-09-26 13:34:56,748 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc540c2221/s2/28865c8b-4512-47c7-bb3c-131ba2b77b0e/current
2019-09-26 13:34:56,748 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc540c2221/s1/28865c8b-4512-47c7-bb3c-131ba2b77b0e/current
2019-09-26 13:34:56,748 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc540c2221/s2/28865c8b-4512-47c7-bb3c-131ba2b77b0e/sm
2019-09-26 13:34:56,748 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc540c2221/s0/28865c8b-4512-47c7-bb3c-131ba2b77b0e/sm
2019-09-26 13:34:56,749 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc540c2221/s1/28865c8b-4512-47c7-bb3c-131ba2b77b0e/sm
2019-09-26 13:34:56,772 INFO  storage.RaftStorage (RaftStorage.java:format(84)) - Storage directory /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc540c2221/s0/28865c8b-4512-47c7-bb3c-131ba2b77b0e has been successfully formatted.
2019-09-26 13:34:56,772 INFO  storage.RaftStorage (RaftStorage.java:format(84)) - Storage directory /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc540c2221/s1/28865c8b-4512-47c7-bb3c-131ba2b77b0e has been successfully formatted.
2019-09-26 13:34:56,772 INFO  storage.RaftStorage (RaftStorage.java:format(84)) - Storage directory /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc540c2221/s2/28865c8b-4512-47c7-bb3c-131ba2b77b0e has been successfully formatted.
2019-09-26 13:34:56,956 INFO  beanutils.FluentPropertyBeanIntrospector (FluentPropertyBeanIntrospector.java:introspect(147)) - Error when creating PropertyDescriptor for public final void org.apache.commons.configuration2.AbstractConfiguration.setProperty(java.lang.String,java.lang.Object)! Ignoring this property.
2019-09-26 13:34:57,003 INFO  impl.MetricsConfig (MetricsConfig.java:loadFirst(121)) - loaded properties from hadoop-metrics2.properties
2019-09-26 13:34:57,026 INFO  impl.MetricsSinkAdapter (MetricsSinkAdapter.java:start(204)) - Sink file started
2019-09-26 13:34:57,040 WARN  impl.MetricsSystemImpl (MetricsSystemImpl.java:configureSinks(508)) - Error creating sink 'graphite'
org.apache.hadoop.metrics2.impl.MetricsConfigException: Error creating plugin: org.apache.hadoop.metrics2.sink.GraphiteSink
	at org.apache.hadoop.metrics2.impl.MetricsConfig.getPlugin(MetricsConfig.java:211)
	at org.apache.hadoop.metrics2.impl.MetricsSystemImpl.newSink(MetricsSystemImpl.java:531)
	at org.apache.hadoop.metrics2.impl.MetricsSystemImpl.configureSinks(MetricsSystemImpl.java:503)
	at org.apache.hadoop.metrics2.impl.MetricsSystemImpl.configure(MetricsSystemImpl.java:479)
	at org.apache.hadoop.metrics2.impl.MetricsSystemImpl.start(MetricsSystemImpl.java:188)
	at org.apache.hadoop.metrics2.impl.MetricsSystemImpl.init(MetricsSystemImpl.java:163)
	at org.apache.hadoop.metrics2.lib.DefaultMetricsSystem.init(DefaultMetricsSystem.java:62)
	at org.apache.hadoop.metrics2.lib.DefaultMetricsSystem.initialize(DefaultMetricsSystem.java:58)
	at org.apache.ratis.metrics.MetricsReporting.<clinit>(MetricsReporting.java:42)
	at org.apache.ratis.logservice.metrics.LogServiceMetricsRegistry.<clinit>(LogServiceMetricsRegistry.java:35)
	at org.apache.ratis.logservice.server.LogStateMachine.initialize(LogStateMachine.java:162)
	at org.apache.ratis.server.impl.ServerState.initStatemachine(ServerState.java:160)
	at org.apache.ratis.server.impl.ServerState.<init>(ServerState.java:112)
	at org.apache.ratis.server.impl.RaftServerImpl.<init>(RaftServerImpl.java:110)
	at org.apache.ratis.server.impl.RaftServerProxy.lambda$newRaftServerImpl$2(RaftServerProxy.java:208)
	at java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1590)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.apache.hadoop.metrics2.MetricsException: Error creating connection, graphite.logservice.ratis.org:2003
	at org.apache.hadoop.metrics2.sink.GraphiteSink$Graphite.connect(GraphiteSink.java:162)
	at org.apache.hadoop.metrics2.sink.GraphiteSink.init(GraphiteSink.java:65)
	at org.apache.hadoop.metrics2.impl.MetricsConfig.getPlugin(MetricsConfig.java:208)
	... 18 more
Caused by: java.net.UnknownHostException: graphite.logservice.ratis.org
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:184)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at java.net.Socket.connect(Socket.java:538)
	at java.net.Socket.<init>(Socket.java:434)
	at java.net.Socket.<init>(Socket.java:211)
	at org.apache.hadoop.metrics2.sink.GraphiteSink$Graphite.connect(GraphiteSink.java:153)
	... 20 more
2019-09-26 13:34:57,145 INFO  impl.MetricsSystemImpl (MetricsSystemImpl.java:startTimer(374)) - Scheduled Metric snapshot period at 10 second(s).
2019-09-26 13:34:57,145 INFO  impl.MetricsSystemImpl (MetricsSystemImpl.java:start(191)) - ratis metrics system started
2019-09-26 13:34:57,153 INFO  metrics.MetricRegistries (MetricRegistriesLoader.java:load(64)) - Loaded MetricRegistries class org.apache.ratis.metrics.impl.MetricRegistriesImpl
2019-09-26 13:34:57,181 WARN  server.LogStateMachine (LogStateMachine.java:load(226)) - The snapshot info is null.
2019-09-26 13:34:57,182 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.notification.no-leader.timeout = 60s (default)
2019-09-26 13:34:57,185 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-09-26 13:34:57,185 WARN  server.LogStateMachine (LogStateMachine.java:load(226)) - The snapshot info is null.
2019-09-26 13:34:57,185 WARN  server.LogStateMachine (LogStateMachine.java:load(226)) - The snapshot info is null.
2019-09-26 13:34:57,186 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.notification.no-leader.timeout = 60s (default)
2019-09-26 13:34:57,186 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.notification.no-leader.timeout = 60s (default)
2019-09-26 13:34:57,186 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-09-26 13:34:57,186 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-09-26 13:34:57,192 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.purge.gap = 1024 (default)
2019-09-26 13:34:57,192 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.purge.gap = 1024 (default)
2019-09-26 13:34:57,192 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-26 13:34:57,192 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.purge.gap = 1024 (default)
2019-09-26 13:34:57,192 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-26 13:34:57,193 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-26 13:34:57,194 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2019-09-26 13:34:57,194 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2019-09-26 13:34:57,194 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2019-09-26 13:34:57,198 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 6 (default)
2019-09-26 13:34:57,198 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 6 (default)
2019-09-26 13:34:57,198 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 6 (default)
2019-09-26 13:34:57,203 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(172)) - new s0@group-131BA2B77B0E-SegmentedRaftLogWorker for RaftStorage:Storage Directory /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc540c2221/s0/28865c8b-4512-47c7-bb3c-131ba2b77b0e
2019-09-26 13:34:57,203 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(172)) - new s1@group-131BA2B77B0E-SegmentedRaftLogWorker for RaftStorage:Storage Directory /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc540c2221/s1/28865c8b-4512-47c7-bb3c-131ba2b77b0e
2019-09-26 13:34:57,203 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(172)) - new s2@group-131BA2B77B0E-SegmentedRaftLogWorker for RaftStorage:Storage Directory /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc540c2221/s2/28865c8b-4512-47c7-bb3c-131ba2b77b0e
2019-09-26 13:34:57,224 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2019-09-26 13:34:57,225 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2019-09-26 13:34:57,225 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2019-09-26 13:34:57,226 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 4096 (default)
2019-09-26 13:34:57,226 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 4096 (default)
2019-09-26 13:34:57,226 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 4096 (default)
2019-09-26 13:34:57,229 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2019-09-26 13:34:57,229 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2019-09-26 13:34:57,229 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2019-09-26 13:34:57,230 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2019-09-26 13:34:57,230 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2019-09-26 13:34:57,230 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2019-09-26 13:34:57,230 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2019-09-26 13:34:57,230 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2019-09-26 13:34:57,230 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2019-09-26 13:34:57,231 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-09-26 13:34:57,231 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-09-26 13:34:57,231 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-09-26 13:34:57,232 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-09-26 13:34:57,233 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-09-26 13:34:57,233 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-09-26 13:34:57,233 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-09-26 13:34:57,233 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-09-26 13:34:57,233 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-09-26 13:34:57,234 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-09-26 13:34:57,234 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-09-26 13:34:57,234 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-09-26 13:34:57,235 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2019-09-26 13:34:57,235 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2019-09-26 13:34:57,235 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2019-09-26 13:34:57,241 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(132)) - s0@group-131BA2B77B0E-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2019-09-26 13:34:57,241 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(132)) - s2@group-131BA2B77B0E-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2019-09-26 13:34:57,241 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(132)) - s1@group-131BA2B77B0E-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2019-09-26 13:34:57,246 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2019-09-26 13:34:57,246 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2019-09-26 13:34:57,246 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2019-09-26 13:34:57,246 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.retention.file.num = -1 (default)
2019-09-26 13:34:57,247 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.retention.file.num = -1 (default)
2019-09-26 13:34:57,247 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.retention.file.num = -1 (default)
2019-09-26 13:34:57,247 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 60s (default)
2019-09-26 13:34:57,247 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 60s (default)
2019-09-26 13:34:57,247 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 60s (default)
2019-09-26 13:34:57,278 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(181)) - s0@group-131BA2B77B0E: start as a follower, conf=-1: [s0:0.0.0.0:44678, s1:0.0.0.0:43172, s2:0.0.0.0:38192], old=null
2019-09-26 13:34:57,281 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s0@group-131BA2B77B0E: changes role from      null to FOLLOWER at term 0 for startAsFollower
2019-09-26 13:34:57,282 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s0: start FollowerState
2019-09-26 13:34:57,285 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-131BA2B77B0E,id=s0
2019-09-26 13:34:57,297 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - s0: start RPC server
2019-09-26 13:34:57,465 INFO  impl.FollowerState (FollowerState.java:run(108)) - s0@group-131BA2B77B0E-FollowerState: change to CANDIDATE, lastRpcTime:183ms, electionTimeout:160ms
2019-09-26 13:34:57,468 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - s0: shutdown FollowerState
2019-09-26 13:34:57,469 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s0@group-131BA2B77B0E: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-09-26 13:34:57,473 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s0: start LeaderElection
2019-09-26 13:34:57,487 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(178)) - s0@group-131BA2B77B0E-LeaderElection1: begin an election at term 1 for -1: [s0:0.0.0.0:44678, s1:0.0.0.0:43172, s2:0.0.0.0:38192], old=null
2019-09-26 13:34:57,570 INFO  server.GrpcService (GrpcService.java:startImpl(158)) - s0: GrpcService started, listening on 0.0.0.0/0.0.0.0:44678
2019-09-26 13:34:57,571 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(181)) - s1@group-131BA2B77B0E: start as a follower, conf=-1: [s0:0.0.0.0:44678, s1:0.0.0.0:43172, s2:0.0.0.0:38192], old=null
2019-09-26 13:34:57,571 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s1@group-131BA2B77B0E: changes role from      null to FOLLOWER at term 0 for startAsFollower
2019-09-26 13:34:57,571 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s1: start FollowerState
2019-09-26 13:34:57,572 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-131BA2B77B0E,id=s1
2019-09-26 13:34:57,577 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - s1: start RPC server
2019-09-26 13:34:57,578 INFO  server.GrpcService (GrpcService.java:startImpl(158)) - s1: GrpcService started, listening on 0.0.0.0/0.0.0.0:43172
2019-09-26 13:34:57,578 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(181)) - s2@group-131BA2B77B0E: start as a follower, conf=-1: [s0:0.0.0.0:44678, s1:0.0.0.0:43172, s2:0.0.0.0:38192], old=null
2019-09-26 13:34:57,578 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s2@group-131BA2B77B0E: changes role from      null to FOLLOWER at term 0 for startAsFollower
2019-09-26 13:34:57,578 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s2: start FollowerState
2019-09-26 13:34:57,579 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-131BA2B77B0E,id=s2
2019-09-26 13:34:57,583 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - s2: start RPC server
2019-09-26 13:34:57,584 INFO  server.GrpcService (GrpcService.java:startImpl(158)) - s2: GrpcService started, listening on 0.0.0.0/0.0.0.0:38192
2019-09-26 13:34:57,586 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 300ms (default)
2019-09-26 13:34:57,589 INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(86)) - printing ALL groups
  s0:  RUNNING CANDIDATE s0@group-131BA2B77B0E:t1, leader=null, voted=s0, raftlog=s0@group-131BA2B77B0E-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:44678, s1:0.0.0.0:43172, s2:0.0.0.0:38192], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-131BA2B77B0E:t0, leader=null, voted=null, raftlog=s1@group-131BA2B77B0E-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:44678, s1:0.0.0.0:43172, s2:0.0.0.0:38192], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-131BA2B77B0E:t0, leader=null, voted=null, raftlog=s2@group-131BA2B77B0E-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:44678, s1:0.0.0.0:43172, s2:0.0.0.0:38192], old=null RUNNING
2019-09-26 13:34:57,594 WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(158)) - FAILED "waitForLeader-null-(expectLeader? true)", attempt #1/100: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING CANDIDATE s0@group-131BA2B77B0E:t1, leader=null, voted=s0, raftlog=s0@group-131BA2B77B0E-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:44678, s1:0.0.0.0:43172, s2:0.0.0.0:38192], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-131BA2B77B0E:t0, leader=null, voted=null, raftlog=s1@group-131BA2B77B0E-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:44678, s1:0.0.0.0:43172, s2:0.0.0.0:38192], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-131BA2B77B0E:t0, leader=null, voted=null, raftlog=s2@group-131BA2B77B0E-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:44678, s1:0.0.0.0:43172, s2:0.0.0.0:38192], old=null RUNNING, sleep 450ms and then retry.
java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING CANDIDATE s0@group-131BA2B77B0E:t1, leader=null, voted=s0, raftlog=s0@group-131BA2B77B0E-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:44678, s1:0.0.0.0:43172, s2:0.0.0.0:38192], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-131BA2B77B0E:t0, leader=null, voted=null, raftlog=s1@group-131BA2B77B0E-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:44678, s1:0.0.0.0:43172, s2:0.0.0.0:38192], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-131BA2B77B0E:t0, leader=null, voted=null, raftlog=s2@group-131BA2B77B0E-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:44678, s1:0.0.0.0:43172, s2:0.0.0.0:38192], old=null RUNNING
	at org.apache.ratis.MiniRaftCluster.newIllegalStateExceptionForNoLeaders(MiniRaftCluster.java:506)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$1(RaftTestUtil.java:90)
	at org.apache.ratis.MiniRaftCluster.getLeader(MiniRaftCluster.java:539)
	at org.apache.ratis.MiniRaftCluster.getLeader(MiniRaftCluster.java:532)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$3(RaftTestUtil.java:98)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:152)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:97)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:77)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:72)
	at org.apache.ratis.logservice.LogServiceReadWriteBase.setUpCluster(LogServiceReadWriteBase.java:116)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:24)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:298)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:292)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:748)
2019-09-26 13:34:57,714 INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(56)) - s0@group-131BA2B77B0E-LeaderElection1: Election TIMEOUT; received 0 response(s) [] and 0 exception(s); s0@group-131BA2B77B0E:t1, leader=null, voted=s0, raftlog=s0@group-131BA2B77B0E-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:44678, s1:0.0.0.0:43172, s2:0.0.0.0:38192], old=null
2019-09-26 13:34:57,729 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(178)) - s0@group-131BA2B77B0E-LeaderElection1: begin an election at term 2 for -1: [s0:0.0.0.0:44678, s1:0.0.0.0:43172, s2:0.0.0.0:38192], old=null
2019-09-26 13:34:57,776 INFO  impl.FollowerState (FollowerState.java:run(108)) - s2@group-131BA2B77B0E-FollowerState: change to CANDIDATE, lastRpcTime:197ms, electionTimeout:197ms
2019-09-26 13:34:57,777 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - s2: shutdown FollowerState
2019-09-26 13:34:57,777 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s2@group-131BA2B77B0E: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-09-26 13:34:57,777 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s2: start LeaderElection
2019-09-26 13:34:57,791 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(178)) - s2@group-131BA2B77B0E-LeaderElection2: begin an election at term 1 for -1: [s0:0.0.0.0:44678, s1:0.0.0.0:43172, s2:0.0.0.0:38192], old=null
2019-09-26 13:34:57,833 INFO  impl.FollowerState (FollowerState.java:run(108)) - s1@group-131BA2B77B0E-FollowerState: change to CANDIDATE, lastRpcTime:261ms, electionTimeout:261ms
2019-09-26 13:34:57,834 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - s1: shutdown FollowerState
2019-09-26 13:34:57,834 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s1@group-131BA2B77B0E: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-09-26 13:34:57,834 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s1: start LeaderElection
2019-09-26 13:34:57,848 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(178)) - s1@group-131BA2B77B0E-LeaderElection3: begin an election at term 1 for -1: [s0:0.0.0.0:44678, s1:0.0.0.0:43172, s2:0.0.0.0:38192], old=null
2019-09-26 13:34:57,876 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s1@group-131BA2B77B0E: changes role from CANDIDATE to FOLLOWER at term 2 for recognizeCandidate:s0
2019-09-26 13:34:57,876 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s2@group-131BA2B77B0E: changes role from CANDIDATE to FOLLOWER at term 2 for recognizeCandidate:s0
2019-09-26 13:34:57,877 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - s1: shutdown LeaderElection
2019-09-26 13:34:57,877 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - s2: shutdown LeaderElection
2019-09-26 13:34:57,878 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s1: start FollowerState
2019-09-26 13:34:57,878 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s2: start FollowerState
2019-09-26 13:34:57,886 INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(56)) - s2@group-131BA2B77B0E-LeaderElection2: Election REJECTED; received 1 response(s) [s2<-s1#0:FAIL-t1] and 0 exception(s); s2@group-131BA2B77B0E:t2, leader=null, voted=null, raftlog=s2@group-131BA2B77B0E-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:44678, s1:0.0.0.0:43172, s2:0.0.0.0:38192], old=null
2019-09-26 13:34:57,886 INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(56)) - s1@group-131BA2B77B0E-LeaderElection3: Election DISCOVERED_A_NEW_TERM; received 1 response(s) [s1<-s0#0:FAIL-t2] and 0 exception(s); s1@group-131BA2B77B0E:t2, leader=null, voted=null, raftlog=s1@group-131BA2B77B0E-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:44678, s1:0.0.0.0:43172, s2:0.0.0.0:38192], old=null
2019-09-26 13:34:57,895 INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(56)) - s0@group-131BA2B77B0E-LeaderElection1: Election REJECTED; received 2 response(s) [s0<-s1#0:FAIL-t2, s0<-s2#0:FAIL-t2] and 0 exception(s); s0@group-131BA2B77B0E:t2, leader=null, voted=s0, raftlog=s0@group-131BA2B77B0E-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:44678, s1:0.0.0.0:43172, s2:0.0.0.0:38192], old=null
2019-09-26 13:34:57,895 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s0@group-131BA2B77B0E: changes role from CANDIDATE to FOLLOWER at term 2 for DISCOVERED_A_NEW_TERM
2019-09-26 13:34:57,895 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - s0: shutdown LeaderElection
2019-09-26 13:34:57,896 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s0: start FollowerState
2019-09-26 13:34:58,045 WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(158)) - FAILED "waitForLeader-null-(expectLeader? true)", attempt #2/100: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-131BA2B77B0E:t2, leader=null, voted=s0, raftlog=s0@group-131BA2B77B0E-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:44678, s1:0.0.0.0:43172, s2:0.0.0.0:38192], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-131BA2B77B0E:t2, leader=null, voted=null, raftlog=s1@group-131BA2B77B0E-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:44678, s1:0.0.0.0:43172, s2:0.0.0.0:38192], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-131BA2B77B0E:t2, leader=null, voted=null, raftlog=s2@group-131BA2B77B0E-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:44678, s1:0.0.0.0:43172, s2:0.0.0.0:38192], old=null RUNNING, sleep 450ms and then retry.
java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-131BA2B77B0E:t2, leader=null, voted=s0, raftlog=s0@group-131BA2B77B0E-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:44678, s1:0.0.0.0:43172, s2:0.0.0.0:38192], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-131BA2B77B0E:t2, leader=null, voted=null, raftlog=s1@group-131BA2B77B0E-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:44678, s1:0.0.0.0:43172, s2:0.0.0.0:38192], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-131BA2B77B0E:t2, leader=null, voted=null, raftlog=s2@group-131BA2B77B0E-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:44678, s1:0.0.0.0:43172, s2:0.0.0.0:38192], old=null RUNNING
	at org.apache.ratis.MiniRaftCluster.newIllegalStateExceptionForNoLeaders(MiniRaftCluster.java:506)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$1(RaftTestUtil.java:90)
	at org.apache.ratis.MiniRaftCluster.getLeader(MiniRaftCluster.java:539)
	at org.apache.ratis.MiniRaftCluster.getLeader(MiniRaftCluster.java:532)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$3(RaftTestUtil.java:98)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:152)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:97)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:77)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:72)
	at org.apache.ratis.logservice.LogServiceReadWriteBase.setUpCluster(LogServiceReadWriteBase.java:116)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:24)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:298)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:292)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:748)
2019-09-26 13:34:58,100 INFO  impl.FollowerState (FollowerState.java:run(108)) - s1@group-131BA2B77B0E-FollowerState: change to CANDIDATE, lastRpcTime:222ms, electionTimeout:222ms
2019-09-26 13:34:58,101 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - s1: shutdown FollowerState
2019-09-26 13:34:58,101 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s1@group-131BA2B77B0E: changes role from  FOLLOWER to CANDIDATE at term 2 for changeToCandidate
2019-09-26 13:34:58,102 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s1: start LeaderElection
2019-09-26 13:34:58,116 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(178)) - s1@group-131BA2B77B0E-LeaderElection4: begin an election at term 3 for -1: [s0:0.0.0.0:44678, s1:0.0.0.0:43172, s2:0.0.0.0:38192], old=null
2019-09-26 13:34:58,122 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s0@group-131BA2B77B0E: changes role from  FOLLOWER to FOLLOWER at term 3 for recognizeCandidate:s1
2019-09-26 13:34:58,122 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s2@group-131BA2B77B0E: changes role from  FOLLOWER to FOLLOWER at term 3 for recognizeCandidate:s1
2019-09-26 13:34:58,122 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - s0: shutdown FollowerState
2019-09-26 13:34:58,122 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - s2: shutdown FollowerState
2019-09-26 13:34:58,123 INFO  impl.FollowerState (FollowerState.java:run(117)) - s0@group-131BA2B77B0E-FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
2019-09-26 13:34:58,123 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s0: start FollowerState
2019-09-26 13:34:58,123 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s2: start FollowerState
2019-09-26 13:34:58,123 INFO  impl.FollowerState (FollowerState.java:run(117)) - s2@group-131BA2B77B0E-FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
2019-09-26 13:34:58,143 INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(56)) - s1@group-131BA2B77B0E-LeaderElection4: Election PASSED; received 1 response(s) [s1<-s0#0:OK-t3] and 0 exception(s); s1@group-131BA2B77B0E:t3, leader=null, voted=s1, raftlog=s1@group-131BA2B77B0E-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:44678, s1:0.0.0.0:43172, s2:0.0.0.0:38192], old=null
2019-09-26 13:34:58,143 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - s1: shutdown LeaderElection
2019-09-26 13:34:58,143 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s1@group-131BA2B77B0E: changes role from CANDIDATE to LEADER at term 3 for changeToLeader
2019-09-26 13:34:58,144 INFO  impl.RaftServerImpl (ServerState.java:setLeader(254)) - s1@group-131BA2B77B0E: change Leader from null to s1 at term 3 for becomeLeader, leader elected after 958ms
2019-09-26 13:34:58,151 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-09-26 13:34:58,151 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-09-26 13:34:58,157 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.write.element-limit = 4096 (default)
2019-09-26 13:34:58,162 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-09-26 13:34:58,163 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-09-26 13:34:58,164 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.element-limit = 65536 (default)
2019-09-26 13:34:58,179 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2019-09-26 13:34:58,179 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-26 13:34:58,180 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2019-09-26 13:34:58,183 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2019-09-26 13:34:58,183 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-09-26 13:34:58,183 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-09-26 13:34:58,185 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2019-09-26 13:34:58,185 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-26 13:34:58,185 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2019-09-26 13:34:58,186 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2019-09-26 13:34:58,186 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-09-26 13:34:58,186 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-09-26 13:34:58,189 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s1: start LeaderState
2019-09-26 13:34:58,209 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(380)) - s1@group-131BA2B77B0E-SegmentedRaftLogWorker: Starting segment from index:0
2019-09-26 13:34:58,220 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(355)) - s1@group-131BA2B77B0E: set configuration 0: [s0:0.0.0.0:44678, s1:0.0.0.0:43172, s2:0.0.0.0:38192], old=null at 0
2019-09-26 13:34:58,245 INFO  impl.RaftServerImpl (ServerState.java:setLeader(254)) - s2@group-131BA2B77B0E: change Leader from null to s1 at term 3 for appendEntries, leader elected after 1059ms
2019-09-26 13:34:58,245 INFO  impl.RaftServerImpl (ServerState.java:setLeader(254)) - s0@group-131BA2B77B0E: change Leader from null to s1 at term 3 for appendEntries, leader elected after 1063ms
2019-09-26 13:34:58,268 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(355)) - s0@group-131BA2B77B0E: set configuration 0: [s0:0.0.0.0:44678, s1:0.0.0.0:43172, s2:0.0.0.0:38192], old=null at 0
2019-09-26 13:34:58,268 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(355)) - s2@group-131BA2B77B0E: set configuration 0: [s0:0.0.0.0:44678, s1:0.0.0.0:43172, s2:0.0.0.0:38192], old=null at 0
2019-09-26 13:34:58,268 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(380)) - s0@group-131BA2B77B0E-SegmentedRaftLogWorker: Starting segment from index:0
2019-09-26 13:34:58,269 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(380)) - s2@group-131BA2B77B0E-SegmentedRaftLogWorker: Starting segment from index:0
2019-09-26 13:34:58,497 INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(101)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-131BA2B77B0E:t3, leader=s1, voted=s1, raftlog=s0@group-131BA2B77B0E-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=0: [s0:0.0.0.0:44678, s1:0.0.0.0:43172, s2:0.0.0.0:38192], old=null RUNNING
  s1:  RUNNING    LEADER s1@group-131BA2B77B0E:t3, leader=s1, voted=s1, raftlog=s1@group-131BA2B77B0E-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=0: [s0:0.0.0.0:44678, s1:0.0.0.0:43172, s2:0.0.0.0:38192], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-131BA2B77B0E:t3, leader=s1, voted=s1, raftlog=s2@group-131BA2B77B0E-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=0: [s0:0.0.0.0:44678, s1:0.0.0.0:43172, s2:0.0.0.0:38192], old=null RUNNING
2019-09-26 13:34:58,511 INFO  logservice.LogServiceReadWriteBase (LogServiceReadWriteBase.java:testReadAllRecords(185)) - Writing 25 records
2019-09-26 13:34:58,526 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(569)) - s0@group-131BA2B77B0E-SegmentedRaftLogWorker: created new log segment /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc540c2221/s0/28865c8b-4512-47c7-bb3c-131ba2b77b0e/current/log_inprogress_0
2019-09-26 13:34:58,526 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(569)) - s2@group-131BA2B77B0E-SegmentedRaftLogWorker: created new log segment /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc540c2221/s2/28865c8b-4512-47c7-bb3c-131ba2b77b0e/current/log_inprogress_0
2019-09-26 13:34:58,526 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(569)) - s1@group-131BA2B77B0E-SegmentedRaftLogWorker: created new log segment /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc540c2221/s1/28865c8b-4512-47c7-bb3c-131ba2b77b0e/current/log_inprogress_0
2019-09-26 13:34:58,565 INFO  client.GrpcClientProtocolService (GrpcClientProtocolService.java:lambda$processClientRequest$0(278)) - Failed RaftClientRequest:client-56FFCBF39EA9->s0@group-131BA2B77B0E, cid=0, seq=0, RW, Message:320b0a060a046c6f6731...(size=13), reply=RaftClientReply:client-56FFCBF39EA9->s0@group-131BA2B77B0E, cid=0, FAILED org.apache.ratis.protocol.NotLeaderException: Server s0@group-131BA2B77B0E is not the leader s1:0.0.0.0:43172, logIndex=0, commits[s0:c-1, s1:c-1, s2:c-1]
2019-09-26 13:34:59,038 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(700)) - ************************************************************** 
2019-09-26 13:34:59,038 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(701)) - *** 
2019-09-26 13:34:59,039 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(702)) - ***     Stopping MiniRaftClusterWithGrpc
2019-09-26 13:34:59,039 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(703)) - *** 
2019-09-26 13:34:59,039 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(704)) - ************************************************************** 
2019-09-26 13:34:59,040 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(705)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-131BA2B77B0E:t3, leader=s1, voted=s1, raftlog=s0@group-131BA2B77B0E-SegmentedRaftLog:OPENED:c50,f50,i50, conf=0: [s0:0.0.0.0:44678, s1:0.0.0.0:43172, s2:0.0.0.0:38192], old=null RUNNING
  s1:  RUNNING    LEADER s1@group-131BA2B77B0E:t3, leader=s1, voted=s1, raftlog=s1@group-131BA2B77B0E-SegmentedRaftLog:OPENED:c50,f50,i50, conf=0: [s0:0.0.0.0:44678, s1:0.0.0.0:43172, s2:0.0.0.0:38192], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-131BA2B77B0E:t3, leader=s1, voted=s1, raftlog=s2@group-131BA2B77B0E-SegmentedRaftLog:OPENED:c50,f50,i50, conf=0: [s0:0.0.0.0:44678, s1:0.0.0.0:43172, s2:0.0.0.0:38192], old=null RUNNING
2019-09-26 13:34:59,125 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - s0: close
2019-09-26 13:34:59,125 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - s1: close
2019-09-26 13:34:59,125 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - s2: close
2019-09-26 13:34:59,128 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(247)) - s0@group-131BA2B77B0E: shutdown
2019-09-26 13:34:59,128 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(247)) - s1@group-131BA2B77B0E: shutdown
2019-09-26 13:34:59,128 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(247)) - s2@group-131BA2B77B0E: shutdown
2019-09-26 13:34:59,128 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-131BA2B77B0E,id=s1
2019-09-26 13:34:59,128 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-131BA2B77B0E,id=s0
2019-09-26 13:34:59,129 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - s1: shutdown LeaderState
2019-09-26 13:34:59,129 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-131BA2B77B0E,id=s2
2019-09-26 13:34:59,129 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - s0: shutdown FollowerState
2019-09-26 13:34:59,130 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - s2: shutdown FollowerState
2019-09-26 13:34:59,130 INFO  impl.FollowerState (FollowerState.java:run(117)) - s0@group-131BA2B77B0E-FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
2019-09-26 13:34:59,130 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(136)) - s0@group-131BA2B77B0E-StateMachineUpdater: set stopIndex = 50
2019-09-26 13:34:59,130 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(202)) - s1@group-131BA2B77B0E-PendingRequests: sendNotLeaderResponses
2019-09-26 13:34:59,130 WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(143)) - s1@group-131BA2B77B0E->s0-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2019-09-26 13:34:59,130 WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(143)) - s1@group-131BA2B77B0E->s2-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2019-09-26 13:34:59,130 INFO  impl.FollowerState (FollowerState.java:run(117)) - s2@group-131BA2B77B0E-FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
2019-09-26 13:34:59,130 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(136)) - s2@group-131BA2B77B0E-StateMachineUpdater: set stopIndex = 50
2019-09-26 13:34:59,131 INFO  impl.RaftServerImpl (ServerState.java:close(386)) - s0@group-131BA2B77B0E: closes. applyIndex: 50
2019-09-26 13:34:59,132 INFO  impl.RaftServerImpl (ServerState.java:close(386)) - s2@group-131BA2B77B0E: closes. applyIndex: 50
2019-09-26 13:34:59,133 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(136)) - s1@group-131BA2B77B0E-StateMachineUpdater: set stopIndex = 50
2019-09-26 13:34:59,133 INFO  impl.RaftServerImpl (ServerState.java:close(386)) - s1@group-131BA2B77B0E: closes. applyIndex: 50
2019-09-26 13:34:59,133 INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(113)) - s2: Completed APPEND_ENTRIES, lastRequest: s1->s2#56-t3, previous=(t:3, i:50), leaderCommit=50, initializing? false, entries: <empty>
2019-09-26 13:34:59,133 INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(113)) - s0: Completed APPEND_ENTRIES, lastRequest: s1->s0#56-t3, previous=(t:3, i:50), leaderCommit=50, initializing? false, entries: <empty>
2019-09-26 13:34:59,134 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(313)) - s2@group-131BA2B77B0E-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-09-26 13:34:59,134 INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(293)) - s1@group-131BA2B77B0E->s2-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2019-09-26 13:34:59,134 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(313)) - s1@group-131BA2B77B0E-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-09-26 13:34:59,134 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(313)) - s0@group-131BA2B77B0E-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-09-26 13:34:59,135 INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(293)) - s1@group-131BA2B77B0E->s0-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2019-09-26 13:34:59,136 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(228)) - s2@group-131BA2B77B0E-SegmentedRaftLogWorker close()
2019-09-26 13:34:59,137 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(228)) - s0@group-131BA2B77B0E-SegmentedRaftLogWorker close()
2019-09-26 13:34:59,137 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(228)) - s1@group-131BA2B77B0E-SegmentedRaftLogWorker close()
2019-09-26 13:34:59,137 INFO  server.GrpcService (GrpcService.java:closeImpl(164)) - s0: shutdown server with port 44678 now
2019-09-26 13:34:59,137 INFO  server.GrpcService (GrpcService.java:closeImpl(164)) - s2: shutdown server with port 38192 now
2019-09-26 13:34:59,138 INFO  server.GrpcService (GrpcService.java:closeImpl(164)) - s1: shutdown server with port 43172 now
2019-09-26 13:34:59,141 INFO  server.GrpcService (GrpcService.java:closeImpl(172)) - s1: shutdown server with port 43172 successfully
2019-09-26 13:34:59,141 INFO  server.GrpcService (GrpcService.java:closeImpl(172)) - s2: shutdown server with port 38192 successfully
2019-09-26 13:34:59,143 INFO  server.GrpcService (GrpcService.java:closeImpl(172)) - s0: shutdown server with port 44678 successfully
2019-09-26 13:34:59,143 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(722)) - MiniRaftClusterWithGrpc shutdown completed
2019-09-26 13:34:59,146 INFO  util.LogUtils (LogUtils.java:setLogLevel(41)) - Set org.apache.ratis.conf.ConfUtils log level to WARN
Sep 26, 2019 1:34:59 PM org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference cleanQueue
SEVERE: *~*~*~ Channel ManagedChannelImpl{logId=45, target=0.0.0.0:43172} was not shutdown properly!!! ~*~*~*
    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.
java.lang.RuntimeException: ManagedChannel allocation site
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.<init>(ManagedChannelOrphanWrapper.java:103)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:53)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:44)
	at org.apache.ratis.thirdparty.io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:411)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.<init>(GrpcClientProtocolClient.java:128)
	at org.apache.ratis.grpc.client.GrpcClientRpc.lambda$new$0(GrpcClientRpc.java:55)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.lambda$getProxy$0(PeerProxyMap.java:61)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:202)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:60)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:108)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:91)
	at org.apache.ratis.client.impl.RaftClientImpl.sendRequest(RaftClientImpl.java:278)
	at org.apache.ratis.client.impl.RaftClientImpl.sendRequestWithRetry(RaftClientImpl.java:246)
	at org.apache.ratis.client.impl.RaftClientImpl.send(RaftClientImpl.java:182)
	at org.apache.ratis.client.impl.RaftClientImpl.send(RaftClientImpl.java:156)
	at org.apache.ratis.logservice.impl.LogWriterImpl.write(LogWriterImpl.java:70)
	at org.apache.ratis.logservice.impl.LogWriterImpl.write(LogWriterImpl.java:64)
	at org.apache.ratis.logservice.LogServiceReadWriteBase.testReadAllRecords(LogServiceReadWriteBase.java:188)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:298)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:292)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:748)

2019-09-26 13:34:59,146 INFO  util.LogUtils (LogUtils.java:setLogLevel(41)) - Set org.apache.ratis.util.FileUtils log level to TRACE
2019-09-26 13:34:59,147 INFO  logservice.LogServiceReadWriteBase (LogServiceReadWriteBase.java:<init>(65)) - Set LogStateMachine OK
2019-09-26 13:34:59,147 INFO  impl.FollowerInfo (FollowerInfo.java:lambda$new$0(51)) - s1@group-131BA2B77B0E->s2: nextIndex: updateUnconditionally 51 -> 50
2019-09-26 13:34:59,147 INFO  impl.FollowerInfo (FollowerInfo.java:lambda$new$0(51)) - s1@group-131BA2B77B0E->s0: nextIndex: updateUnconditionally 51 -> 50
2019-09-26 13:34:59,148 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:<init>(253)) - new MiniRaftClusterWithGrpc with group-9EC73927C2EA:[s0:0.0.0.0:34568, s1:0.0.0.0:33959, s2:0.0.0.0:41691]
2019-09-26 13:34:59,148 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:start(287)) - .............................................................. 
2019-09-26 13:34:59,148 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:start(288)) - ... 
2019-09-26 13:34:59,148 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:start(289)) - ...     Starting MiniRaftClusterWithGrpc
2019-09-26 13:34:59,149 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:start(290)) - ... 
2019-09-26 13:34:59,149 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:start(291)) - .............................................................. 
2019-09-26 13:34:59,149 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:initServers(265)) - servers = {}
2019-09-26 13:34:59,149 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(330)) - newRaftServer: s0, group-9EC73927C2EA:[s0:0.0.0.0:34568, s1:0.0.0.0:33959, s2:0.0.0.0:41691], format? true
2019-09-26 13:34:59,149 TRACE util.FileUtils (FileUtils.java:deleteFully(88)) - deleteFully target/test/data/edf3c5cf/MiniRaftClusterWithGrpcad7c1872/s0
2019-09-26 13:34:59,150 TRACE util.FileUtils (FileUtils.java:deleteFully(104)) - deleteFully: target/test/data/edf3c5cf/MiniRaftClusterWithGrpcad7c1872/s0 does not exist.
2019-09-26 13:34:59,150 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(335)) - Formatted directory target/test/data/edf3c5cf/MiniRaftClusterWithGrpcad7c1872/s0
2019-09-26 13:34:59,150 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-09-26 13:34:59,151 INFO  grpc.GrpcFactory (GrpcFactory.java:checkPooledByteBufAllocatorUseCacheForAllThreads(45)) - PERFORMANCE WARNING: useCacheForAllThreads is true that may cause Netty to create a lot garbage objects and, as a result, trigger GC.
	It is recommended to disable useCacheForAllThreads by setting -Dorg.apache.ratis.thirdparty.io.netty.allocator.useCacheForAllThreads=false in command line.
2019-09-26 13:34:59,151 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 34568 (custom)
2019-09-26 13:34:59,151 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2019-09-26 13:34:59,152 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-26 13:34:59,152 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-09-26 13:34:59,152 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-09-26 13:34:59,153 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcad7c1872/s0] (custom)
2019-09-26 13:34:59,153 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - s0: addNew group-9EC73927C2EA:[s0:0.0.0.0:34568, s1:0.0.0.0:33959, s2:0.0.0.0:41691] returns group-9EC73927C2EA:java.util.concurrent.CompletableFuture@5b1b185e[Not completed]
2019-09-26 13:34:59,153 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(330)) - newRaftServer: s1, group-9EC73927C2EA:[s0:0.0.0.0:34568, s1:0.0.0.0:33959, s2:0.0.0.0:41691], format? true
2019-09-26 13:34:59,154 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(95)) - s0: new RaftServerImpl for group-9EC73927C2EA:[s0:0.0.0.0:34568, s1:0.0.0.0:33959, s2:0.0.0.0:41691] with LogStateMachine:uninitialized
2019-09-26 13:34:59,154 TRACE util.FileUtils (FileUtils.java:deleteFully(88)) - deleteFully target/test/data/edf3c5cf/MiniRaftClusterWithGrpcad7c1872/s1
2019-09-26 13:34:59,154 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 150ms (default)
2019-09-26 13:34:59,154 TRACE util.FileUtils (FileUtils.java:deleteFully(104)) - deleteFully: target/test/data/edf3c5cf/MiniRaftClusterWithGrpcad7c1872/s1 does not exist.
2019-09-26 13:34:59,154 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 300ms (default)
2019-09-26 13:34:59,154 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(335)) - Formatted directory target/test/data/edf3c5cf/MiniRaftClusterWithGrpcad7c1872/s1
2019-09-26 13:34:59,155 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 60s (default)
2019-09-26 13:34:59,155 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-09-26 13:34:59,155 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.sleep.deviation.threshold = 300 (default)
2019-09-26 13:34:59,155 INFO  grpc.GrpcFactory (GrpcFactory.java:checkPooledByteBufAllocatorUseCacheForAllThreads(45)) - PERFORMANCE WARNING: useCacheForAllThreads is true that may cause Netty to create a lot garbage objects and, as a result, trigger GC.
	It is recommended to disable useCacheForAllThreads by setting -Dorg.apache.ratis.thirdparty.io.netty.allocator.useCacheForAllThreads=false in command line.
2019-09-26 13:34:59,155 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-09-26 13:34:59,156 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 33959 (custom)
2019-09-26 13:34:59,156 INFO  impl.RaftServerImpl (ServerState.java:<init>(103)) - s0@group-9EC73927C2EA: ConfigurationManager, init=-1: [s0:0.0.0.0:34568, s1:0.0.0.0:33959, s2:0.0.0.0:41691], old=null, confs=<EMPTY_MAP>
2019-09-26 13:34:59,156 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2019-09-26 13:34:59,156 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcad7c1872/s0] (custom)
2019-09-26 13:34:59,156 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-26 13:34:59,157 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.corruption.policy = EXCEPTION (default)
2019-09-26 13:34:59,157 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-09-26 13:34:59,157 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcad7c1872/s0/1f9acf31-c89d-41ff-b633-9ec73927c2ea does not exist. Creating ...
2019-09-26 13:34:59,157 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-09-26 13:34:59,158 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcad7c1872/s1] (custom)
2019-09-26 13:34:59,158 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcad7c1872/s0/1f9acf31-c89d-41ff-b633-9ec73927c2ea
2019-09-26 13:34:59,158 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - s1: addNew group-9EC73927C2EA:[s0:0.0.0.0:34568, s1:0.0.0.0:33959, s2:0.0.0.0:41691] returns group-9EC73927C2EA:java.util.concurrent.CompletableFuture@386ed1aa[Not completed]
2019-09-26 13:34:59,158 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(330)) - newRaftServer: s2, group-9EC73927C2EA:[s0:0.0.0.0:34568, s1:0.0.0.0:33959, s2:0.0.0.0:41691], format? true
2019-09-26 13:34:59,158 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(95)) - s1: new RaftServerImpl for group-9EC73927C2EA:[s0:0.0.0.0:34568, s1:0.0.0.0:33959, s2:0.0.0.0:41691] with LogStateMachine:uninitialized
2019-09-26 13:34:59,158 TRACE util.FileUtils (FileUtils.java:deleteFully(88)) - deleteFully target/test/data/edf3c5cf/MiniRaftClusterWithGrpcad7c1872/s2
2019-09-26 13:34:59,159 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 150ms (default)
2019-09-26 13:34:59,159 TRACE util.FileUtils (FileUtils.java:deleteFully(104)) - deleteFully: target/test/data/edf3c5cf/MiniRaftClusterWithGrpcad7c1872/s2 does not exist.
2019-09-26 13:34:59,159 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 300ms (default)
2019-09-26 13:34:59,159 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(335)) - Formatted directory target/test/data/edf3c5cf/MiniRaftClusterWithGrpcad7c1872/s2
2019-09-26 13:34:59,159 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 60s (default)
2019-09-26 13:34:59,160 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.sleep.deviation.threshold = 300 (default)
2019-09-26 13:34:59,160 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-09-26 13:34:59,160 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-09-26 13:34:59,160 INFO  grpc.GrpcFactory (GrpcFactory.java:checkPooledByteBufAllocatorUseCacheForAllThreads(45)) - PERFORMANCE WARNING: useCacheForAllThreads is true that may cause Netty to create a lot garbage objects and, as a result, trigger GC.
	It is recommended to disable useCacheForAllThreads by setting -Dorg.apache.ratis.thirdparty.io.netty.allocator.useCacheForAllThreads=false in command line.
2019-09-26 13:34:59,160 INFO  impl.RaftServerImpl (ServerState.java:<init>(103)) - s1@group-9EC73927C2EA: ConfigurationManager, init=-1: [s0:0.0.0.0:34568, s1:0.0.0.0:33959, s2:0.0.0.0:41691], old=null, confs=<EMPTY_MAP>
2019-09-26 13:34:59,160 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 41691 (custom)
2019-09-26 13:34:59,161 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcad7c1872/s1] (custom)
2019-09-26 13:34:59,161 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2019-09-26 13:34:59,161 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.corruption.policy = EXCEPTION (default)
2019-09-26 13:34:59,161 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-26 13:34:59,161 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcad7c1872/s1/1f9acf31-c89d-41ff-b633-9ec73927c2ea does not exist. Creating ...
2019-09-26 13:34:59,161 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-09-26 13:34:59,162 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-09-26 13:34:59,162 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcad7c1872/s1/1f9acf31-c89d-41ff-b633-9ec73927c2ea
2019-09-26 13:34:59,163 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcad7c1872/s2] (custom)
2019-09-26 13:34:59,163 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - s2: addNew group-9EC73927C2EA:[s0:0.0.0.0:34568, s1:0.0.0.0:33959, s2:0.0.0.0:41691] returns group-9EC73927C2EA:java.util.concurrent.CompletableFuture@6dc7300c[Not completed]
2019-09-26 13:34:59,163 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(95)) - s2: new RaftServerImpl for group-9EC73927C2EA:[s0:0.0.0.0:34568, s1:0.0.0.0:33959, s2:0.0.0.0:41691] with LogStateMachine:uninitialized
2019-09-26 13:34:59,163 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 150ms (default)
2019-09-26 13:34:59,164 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 300ms (default)
2019-09-26 13:34:59,164 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 60s (default)
2019-09-26 13:34:59,164 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.sleep.deviation.threshold = 300 (default)
2019-09-26 13:34:59,164 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-09-26 13:34:59,165 INFO  impl.RaftServerImpl (ServerState.java:<init>(103)) - s2@group-9EC73927C2EA: ConfigurationManager, init=-1: [s0:0.0.0.0:34568, s1:0.0.0.0:33959, s2:0.0.0.0:41691], old=null, confs=<EMPTY_MAP>
2019-09-26 13:34:59,165 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcad7c1872/s2] (custom)
2019-09-26 13:34:59,165 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.corruption.policy = EXCEPTION (default)
2019-09-26 13:34:59,166 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcad7c1872/s2/1f9acf31-c89d-41ff-b633-9ec73927c2ea does not exist. Creating ...
2019-09-26 13:34:59,166 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcad7c1872/s2/1f9acf31-c89d-41ff-b633-9ec73927c2ea
2019-09-26 13:34:59,171 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcad7c1872/s2/1f9acf31-c89d-41ff-b633-9ec73927c2ea/in_use.lock acquired by nodename 10855@ratis-test-j9cz4-1458154678
2019-09-26 13:34:59,171 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcad7c1872/s1/1f9acf31-c89d-41ff-b633-9ec73927c2ea/in_use.lock acquired by nodename 10855@ratis-test-j9cz4-1458154678
2019-09-26 13:34:59,171 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcad7c1872/s0/1f9acf31-c89d-41ff-b633-9ec73927c2ea/in_use.lock acquired by nodename 10855@ratis-test-j9cz4-1458154678
2019-09-26 13:34:59,172 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcad7c1872/s2/1f9acf31-c89d-41ff-b633-9ec73927c2ea/current
2019-09-26 13:34:59,172 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcad7c1872/s1/1f9acf31-c89d-41ff-b633-9ec73927c2ea/current
2019-09-26 13:34:59,172 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcad7c1872/s2/1f9acf31-c89d-41ff-b633-9ec73927c2ea/sm
2019-09-26 13:34:59,172 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcad7c1872/s0/1f9acf31-c89d-41ff-b633-9ec73927c2ea/current
2019-09-26 13:34:59,172 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcad7c1872/s1/1f9acf31-c89d-41ff-b633-9ec73927c2ea/sm
2019-09-26 13:34:59,173 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcad7c1872/s0/1f9acf31-c89d-41ff-b633-9ec73927c2ea/sm
2019-09-26 13:34:59,186 INFO  storage.RaftStorage (RaftStorage.java:format(84)) - Storage directory /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcad7c1872/s1/1f9acf31-c89d-41ff-b633-9ec73927c2ea has been successfully formatted.
2019-09-26 13:34:59,186 INFO  storage.RaftStorage (RaftStorage.java:format(84)) - Storage directory /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcad7c1872/s2/1f9acf31-c89d-41ff-b633-9ec73927c2ea has been successfully formatted.
2019-09-26 13:34:59,186 INFO  storage.RaftStorage (RaftStorage.java:format(84)) - Storage directory /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcad7c1872/s0/1f9acf31-c89d-41ff-b633-9ec73927c2ea has been successfully formatted.
2019-09-26 13:34:59,188 WARN  server.LogStateMachine (LogStateMachine.java:load(226)) - The snapshot info is null.
2019-09-26 13:34:59,188 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.notification.no-leader.timeout = 60s (default)
2019-09-26 13:34:59,188 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-09-26 13:34:59,189 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.purge.gap = 1024 (default)
2019-09-26 13:34:59,189 WARN  server.LogStateMachine (LogStateMachine.java:load(226)) - The snapshot info is null.
2019-09-26 13:34:59,189 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-26 13:34:59,189 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.notification.no-leader.timeout = 60s (default)
2019-09-26 13:34:59,189 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2019-09-26 13:34:59,189 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-09-26 13:34:59,189 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 6 (default)
2019-09-26 13:34:59,190 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.purge.gap = 1024 (default)
2019-09-26 13:34:59,190 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(172)) - new s1@group-9EC73927C2EA-SegmentedRaftLogWorker for RaftStorage:Storage Directory /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcad7c1872/s1/1f9acf31-c89d-41ff-b633-9ec73927c2ea
2019-09-26 13:34:59,190 WARN  server.LogStateMachine (LogStateMachine.java:load(226)) - The snapshot info is null.
2019-09-26 13:34:59,190 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2019-09-26 13:34:59,190 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-26 13:34:59,190 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 4096 (default)
2019-09-26 13:34:59,190 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.notification.no-leader.timeout = 60s (default)
2019-09-26 13:34:59,190 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2019-09-26 13:34:59,190 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2019-09-26 13:34:59,191 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2019-09-26 13:34:59,190 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-09-26 13:34:59,191 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2019-09-26 13:34:59,191 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 6 (default)
2019-09-26 13:34:59,191 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-09-26 13:34:59,191 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.purge.gap = 1024 (default)
2019-09-26 13:34:59,191 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-09-26 13:34:59,191 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(172)) - new s0@group-9EC73927C2EA-SegmentedRaftLogWorker for RaftStorage:Storage Directory /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcad7c1872/s0/1f9acf31-c89d-41ff-b633-9ec73927c2ea
2019-09-26 13:34:59,191 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-09-26 13:34:59,191 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-26 13:34:59,192 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-09-26 13:34:59,192 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2019-09-26 13:34:59,192 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2019-09-26 13:34:59,192 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2019-09-26 13:34:59,192 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 4096 (default)
2019-09-26 13:34:59,192 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(132)) - s1@group-9EC73927C2EA-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2019-09-26 13:34:59,192 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 6 (default)
2019-09-26 13:34:59,192 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2019-09-26 13:34:59,193 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2019-09-26 13:34:59,193 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(172)) - new s2@group-9EC73927C2EA-SegmentedRaftLogWorker for RaftStorage:Storage Directory /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcad7c1872/s2/1f9acf31-c89d-41ff-b633-9ec73927c2ea
2019-09-26 13:34:59,193 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.retention.file.num = -1 (default)
2019-09-26 13:34:59,193 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2019-09-26 13:34:59,193 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 60s (default)
2019-09-26 13:34:59,193 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2019-09-26 13:34:59,193 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2019-09-26 13:34:59,193 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 4096 (default)
2019-09-26 13:34:59,194 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-09-26 13:34:59,194 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2019-09-26 13:34:59,194 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-09-26 13:34:59,194 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2019-09-26 13:34:59,194 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-09-26 13:34:59,194 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2019-09-26 13:34:59,194 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-09-26 13:34:59,195 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-09-26 13:34:59,195 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2019-09-26 13:34:59,195 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-09-26 13:34:59,195 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-09-26 13:34:59,195 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(132)) - s0@group-9EC73927C2EA-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2019-09-26 13:34:59,195 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-09-26 13:34:59,195 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2019-09-26 13:34:59,195 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2019-09-26 13:34:59,196 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(132)) - s2@group-9EC73927C2EA-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2019-09-26 13:34:59,196 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.retention.file.num = -1 (default)
2019-09-26 13:34:59,196 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2019-09-26 13:34:59,196 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 60s (default)
2019-09-26 13:34:59,196 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.retention.file.num = -1 (default)
2019-09-26 13:34:59,197 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 60s (default)
2019-09-26 13:34:59,201 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(181)) - s0@group-9EC73927C2EA: start as a follower, conf=-1: [s0:0.0.0.0:34568, s1:0.0.0.0:33959, s2:0.0.0.0:41691], old=null
2019-09-26 13:34:59,201 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s0@group-9EC73927C2EA: changes role from      null to FOLLOWER at term 0 for startAsFollower
2019-09-26 13:34:59,201 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s0: start FollowerState
2019-09-26 13:34:59,202 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-9EC73927C2EA,id=s0
2019-09-26 13:34:59,205 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - s0: start RPC server
2019-09-26 13:34:59,206 INFO  server.GrpcService (GrpcService.java:startImpl(158)) - s0: GrpcService started, listening on 0.0.0.0/0.0.0.0:34568
2019-09-26 13:34:59,206 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(181)) - s1@group-9EC73927C2EA: start as a follower, conf=-1: [s0:0.0.0.0:34568, s1:0.0.0.0:33959, s2:0.0.0.0:41691], old=null
2019-09-26 13:34:59,206 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s1@group-9EC73927C2EA: changes role from      null to FOLLOWER at term 0 for startAsFollower
2019-09-26 13:34:59,206 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s1: start FollowerState
2019-09-26 13:34:59,207 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-9EC73927C2EA,id=s1
2019-09-26 13:34:59,209 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - s1: start RPC server
2019-09-26 13:34:59,209 INFO  server.GrpcService (GrpcService.java:startImpl(158)) - s1: GrpcService started, listening on 0.0.0.0/0.0.0.0:33959
2019-09-26 13:34:59,210 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(181)) - s2@group-9EC73927C2EA: start as a follower, conf=-1: [s0:0.0.0.0:34568, s1:0.0.0.0:33959, s2:0.0.0.0:41691], old=null
2019-09-26 13:34:59,210 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s2@group-9EC73927C2EA: changes role from      null to FOLLOWER at term 0 for startAsFollower
2019-09-26 13:34:59,210 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s2: start FollowerState
2019-09-26 13:34:59,211 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-9EC73927C2EA,id=s2
2019-09-26 13:34:59,214 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - s2: start RPC server
2019-09-26 13:34:59,214 INFO  server.GrpcService (GrpcService.java:startImpl(158)) - s2: GrpcService started, listening on 0.0.0.0/0.0.0.0:41691
2019-09-26 13:34:59,215 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 300ms (default)
2019-09-26 13:34:59,215 INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(86)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-9EC73927C2EA:t0, leader=null, voted=null, raftlog=s0@group-9EC73927C2EA-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:34568, s1:0.0.0.0:33959, s2:0.0.0.0:41691], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-9EC73927C2EA:t0, leader=null, voted=null, raftlog=s1@group-9EC73927C2EA-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:34568, s1:0.0.0.0:33959, s2:0.0.0.0:41691], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-9EC73927C2EA:t0, leader=null, voted=null, raftlog=s2@group-9EC73927C2EA-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:34568, s1:0.0.0.0:33959, s2:0.0.0.0:41691], old=null RUNNING
2019-09-26 13:34:59,216 WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(158)) - FAILED "waitForLeader-null-(expectLeader? true)", attempt #1/100: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-9EC73927C2EA:t0, leader=null, voted=null, raftlog=s0@group-9EC73927C2EA-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:34568, s1:0.0.0.0:33959, s2:0.0.0.0:41691], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-9EC73927C2EA:t0, leader=null, voted=null, raftlog=s1@group-9EC73927C2EA-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:34568, s1:0.0.0.0:33959, s2:0.0.0.0:41691], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-9EC73927C2EA:t0, leader=null, voted=null, raftlog=s2@group-9EC73927C2EA-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:34568, s1:0.0.0.0:33959, s2:0.0.0.0:41691], old=null RUNNING, sleep 450ms and then retry.
java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-9EC73927C2EA:t0, leader=null, voted=null, raftlog=s0@group-9EC73927C2EA-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:34568, s1:0.0.0.0:33959, s2:0.0.0.0:41691], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-9EC73927C2EA:t0, leader=null, voted=null, raftlog=s1@group-9EC73927C2EA-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:34568, s1:0.0.0.0:33959, s2:0.0.0.0:41691], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-9EC73927C2EA:t0, leader=null, voted=null, raftlog=s2@group-9EC73927C2EA-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:34568, s1:0.0.0.0:33959, s2:0.0.0.0:41691], old=null RUNNING
	at org.apache.ratis.MiniRaftCluster.newIllegalStateExceptionForNoLeaders(MiniRaftCluster.java:506)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$1(RaftTestUtil.java:90)
	at org.apache.ratis.MiniRaftCluster.getLeader(MiniRaftCluster.java:539)
	at org.apache.ratis.MiniRaftCluster.getLeader(MiniRaftCluster.java:532)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$3(RaftTestUtil.java:98)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:152)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:97)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:77)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:72)
	at org.apache.ratis.logservice.LogServiceReadWriteBase.setUpCluster(LogServiceReadWriteBase.java:116)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:24)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:298)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:292)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:748)
2019-09-26 13:34:59,452 INFO  impl.FollowerState (FollowerState.java:run(108)) - s2@group-9EC73927C2EA-FollowerState: change to CANDIDATE, lastRpcTime:241ms, electionTimeout:241ms
2019-09-26 13:34:59,452 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - s2: shutdown FollowerState
2019-09-26 13:34:59,452 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s2@group-9EC73927C2EA: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-09-26 13:34:59,453 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s2: start LeaderElection
2019-09-26 13:34:59,456 INFO  impl.FollowerState (FollowerState.java:run(108)) - s1@group-9EC73927C2EA-FollowerState: change to CANDIDATE, lastRpcTime:249ms, electionTimeout:249ms
2019-09-26 13:34:59,456 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - s1: shutdown FollowerState
2019-09-26 13:34:59,456 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s1@group-9EC73927C2EA: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-09-26 13:34:59,456 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s1: start LeaderElection
2019-09-26 13:34:59,464 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(178)) - s1@group-9EC73927C2EA-LeaderElection6: begin an election at term 1 for -1: [s0:0.0.0.0:34568, s1:0.0.0.0:33959, s2:0.0.0.0:41691], old=null
2019-09-26 13:34:59,464 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(178)) - s2@group-9EC73927C2EA-LeaderElection5: begin an election at term 1 for -1: [s0:0.0.0.0:34568, s1:0.0.0.0:33959, s2:0.0.0.0:41691], old=null
2019-09-26 13:34:59,473 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s0@group-9EC73927C2EA: changes role from  FOLLOWER to FOLLOWER at term 1 for recognizeCandidate:s1
2019-09-26 13:34:59,473 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - s0: shutdown FollowerState
2019-09-26 13:34:59,473 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s0: start FollowerState
2019-09-26 13:34:59,474 INFO  impl.FollowerState (FollowerState.java:run(117)) - s0@group-9EC73927C2EA-FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
2019-09-26 13:34:59,488 INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(56)) - s2@group-9EC73927C2EA-LeaderElection5: Election REJECTED; received 2 response(s) [s2<-s0#0:FAIL-t1, s2<-s1#0:FAIL-t1] and 0 exception(s); s2@group-9EC73927C2EA:t1, leader=null, voted=s2, raftlog=s2@group-9EC73927C2EA-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:34568, s1:0.0.0.0:33959, s2:0.0.0.0:41691], old=null
2019-09-26 13:34:59,488 INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(56)) - s1@group-9EC73927C2EA-LeaderElection6: Election PASSED; received 2 response(s) [s1<-s0#0:OK-t1, s1<-s2#0:FAIL-t1] and 0 exception(s); s1@group-9EC73927C2EA:t1, leader=null, voted=s1, raftlog=s1@group-9EC73927C2EA-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:34568, s1:0.0.0.0:33959, s2:0.0.0.0:41691], old=null
2019-09-26 13:34:59,489 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s2@group-9EC73927C2EA: changes role from CANDIDATE to FOLLOWER at term 1 for DISCOVERED_A_NEW_TERM
2019-09-26 13:34:59,489 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - s1: shutdown LeaderElection
2019-09-26 13:34:59,489 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - s2: shutdown LeaderElection
2019-09-26 13:34:59,489 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s1@group-9EC73927C2EA: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-09-26 13:34:59,489 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s2: start FollowerState
2019-09-26 13:34:59,489 INFO  impl.RaftServerImpl (ServerState.java:setLeader(254)) - s1@group-9EC73927C2EA: change Leader from null to s1 at term 1 for becomeLeader, leader elected after 301ms
2019-09-26 13:34:59,490 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-09-26 13:34:59,490 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-09-26 13:34:59,490 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.write.element-limit = 4096 (default)
2019-09-26 13:34:59,491 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-09-26 13:34:59,491 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-09-26 13:34:59,491 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.element-limit = 65536 (default)
2019-09-26 13:34:59,494 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2019-09-26 13:34:59,495 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-26 13:34:59,495 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2019-09-26 13:34:59,495 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2019-09-26 13:34:59,495 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-09-26 13:34:59,495 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-09-26 13:34:59,496 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2019-09-26 13:34:59,496 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-26 13:34:59,496 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2019-09-26 13:34:59,497 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2019-09-26 13:34:59,497 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-09-26 13:34:59,497 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-09-26 13:34:59,497 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s1: start LeaderState
2019-09-26 13:34:59,498 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(380)) - s1@group-9EC73927C2EA-SegmentedRaftLogWorker: Starting segment from index:0
2019-09-26 13:34:59,499 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(355)) - s1@group-9EC73927C2EA: set configuration 0: [s0:0.0.0.0:34568, s1:0.0.0.0:33959, s2:0.0.0.0:41691], old=null at 0
2019-09-26 13:34:59,502 INFO  impl.RaftServerImpl (ServerState.java:setLeader(254)) - s0@group-9EC73927C2EA: change Leader from null to s1 at term 1 for appendEntries, leader elected after 312ms
2019-09-26 13:34:59,502 INFO  impl.RaftServerImpl (ServerState.java:setLeader(254)) - s2@group-9EC73927C2EA: change Leader from null to s1 at term 1 for appendEntries, leader elected after 311ms
2019-09-26 13:34:59,505 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(355)) - s0@group-9EC73927C2EA: set configuration 0: [s0:0.0.0.0:34568, s1:0.0.0.0:33959, s2:0.0.0.0:41691], old=null at 0
2019-09-26 13:34:59,505 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(380)) - s0@group-9EC73927C2EA-SegmentedRaftLogWorker: Starting segment from index:0
2019-09-26 13:34:59,505 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(355)) - s2@group-9EC73927C2EA: set configuration 0: [s0:0.0.0.0:34568, s1:0.0.0.0:33959, s2:0.0.0.0:41691], old=null at 0
2019-09-26 13:34:59,506 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(380)) - s2@group-9EC73927C2EA-SegmentedRaftLogWorker: Starting segment from index:0
2019-09-26 13:34:59,654 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(569)) - s0@group-9EC73927C2EA-SegmentedRaftLogWorker: created new log segment /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcad7c1872/s0/1f9acf31-c89d-41ff-b633-9ec73927c2ea/current/log_inprogress_0
2019-09-26 13:34:59,654 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(569)) - s1@group-9EC73927C2EA-SegmentedRaftLogWorker: created new log segment /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcad7c1872/s1/1f9acf31-c89d-41ff-b633-9ec73927c2ea/current/log_inprogress_0
2019-09-26 13:34:59,654 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(569)) - s2@group-9EC73927C2EA-SegmentedRaftLogWorker: created new log segment /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcad7c1872/s2/1f9acf31-c89d-41ff-b633-9ec73927c2ea/current/log_inprogress_0
2019-09-26 13:34:59,667 INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(101)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-9EC73927C2EA:t1, leader=s1, voted=s1, raftlog=s0@group-9EC73927C2EA-SegmentedRaftLog:OPENED:c-1,f0,i0, conf=0: [s0:0.0.0.0:34568, s1:0.0.0.0:33959, s2:0.0.0.0:41691], old=null RUNNING
  s1:  RUNNING    LEADER s1@group-9EC73927C2EA:t1, leader=s1, voted=s1, raftlog=s1@group-9EC73927C2EA-SegmentedRaftLog:OPENED:c0,f0,i0, conf=0: [s0:0.0.0.0:34568, s1:0.0.0.0:33959, s2:0.0.0.0:41691], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-9EC73927C2EA:t1, leader=s1, voted=s2, raftlog=s2@group-9EC73927C2EA-SegmentedRaftLog:OPENED:c-1,f0,i0, conf=0: [s0:0.0.0.0:34568, s1:0.0.0.0:33959, s2:0.0.0.0:41691], old=null RUNNING
2019-09-26 13:34:59,669 INFO  logservice.LogServiceReadWriteBase (LogServiceReadWriteBase.java:testSeekFromWrite(263)) - Writing 10 records
2019-09-26 13:34:59,677 INFO  client.GrpcClientProtocolService (GrpcClientProtocolService.java:lambda$processClientRequest$0(278)) - Failed RaftClientRequest:client-F018FD084651->s0@group-9EC73927C2EA, cid=52, seq=0, RW, Message:32260a060a046c6f6731...(size=40), reply=RaftClientReply:client-F018FD084651->s0@group-9EC73927C2EA, cid=52, FAILED org.apache.ratis.protocol.NotLeaderException: Server s0@group-9EC73927C2EA is not the leader s1:0.0.0.0:33959, logIndex=0, commits[s0:c-1, s1:c-1, s2:c-1]
2019-09-26 13:34:59,987 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(700)) - ************************************************************** 
2019-09-26 13:34:59,989 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(701)) - *** 
2019-09-26 13:34:59,989 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(702)) - ***     Stopping MiniRaftClusterWithGrpc
2019-09-26 13:34:59,989 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(703)) - *** 
2019-09-26 13:34:59,989 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(704)) - ************************************************************** 
2019-09-26 13:34:59,989 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(705)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-9EC73927C2EA:t1, leader=s1, voted=s1, raftlog=s0@group-9EC73927C2EA-SegmentedRaftLog:OPENED:c21,f22,i22, conf=0: [s0:0.0.0.0:34568, s1:0.0.0.0:33959, s2:0.0.0.0:41691], old=null RUNNING
  s1:  RUNNING    LEADER s1@group-9EC73927C2EA:t1, leader=s1, voted=s1, raftlog=s1@group-9EC73927C2EA-SegmentedRaftLog:OPENED:c22,f22,i22, conf=0: [s0:0.0.0.0:34568, s1:0.0.0.0:33959, s2:0.0.0.0:41691], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-9EC73927C2EA:t1, leader=s1, voted=s2, raftlog=s2@group-9EC73927C2EA-SegmentedRaftLog:OPENED:c22,f22,i22, conf=0: [s0:0.0.0.0:34568, s1:0.0.0.0:33959, s2:0.0.0.0:41691], old=null RUNNING
2019-09-26 13:34:59,991 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - s0: close
2019-09-26 13:34:59,991 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - s1: close
2019-09-26 13:34:59,991 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - s2: close
2019-09-26 13:34:59,991 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(247)) - s0@group-9EC73927C2EA: shutdown
2019-09-26 13:34:59,991 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(247)) - s2@group-9EC73927C2EA: shutdown
2019-09-26 13:34:59,991 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(247)) - s1@group-9EC73927C2EA: shutdown
2019-09-26 13:34:59,991 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-9EC73927C2EA,id=s2
2019-09-26 13:34:59,991 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-9EC73927C2EA,id=s0
2019-09-26 13:34:59,992 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - s2: shutdown FollowerState
2019-09-26 13:34:59,992 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-9EC73927C2EA,id=s1
2019-09-26 13:34:59,992 INFO  impl.FollowerState (FollowerState.java:run(117)) - s2@group-9EC73927C2EA-FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
2019-09-26 13:34:59,992 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(136)) - s2@group-9EC73927C2EA-StateMachineUpdater: set stopIndex = 22
2019-09-26 13:34:59,992 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - s0: shutdown FollowerState
2019-09-26 13:34:59,992 INFO  impl.RaftServerImpl (ServerState.java:close(386)) - s2@group-9EC73927C2EA: closes. applyIndex: 22
2019-09-26 13:34:59,992 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - s1: shutdown LeaderState
2019-09-26 13:34:59,993 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(313)) - s2@group-9EC73927C2EA-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-09-26 13:34:59,993 WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(143)) - s1@group-9EC73927C2EA->s2-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2019-09-26 13:34:59,993 INFO  impl.FollowerState (FollowerState.java:run(117)) - s0@group-9EC73927C2EA-FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
2019-09-26 13:34:59,993 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(136)) - s0@group-9EC73927C2EA-StateMachineUpdater: set stopIndex = 22
2019-09-26 13:34:59,993 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(202)) - s1@group-9EC73927C2EA-PendingRequests: sendNotLeaderResponses
2019-09-26 13:34:59,993 WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(143)) - s1@group-9EC73927C2EA->s0-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2019-09-26 13:34:59,993 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(136)) - s1@group-9EC73927C2EA-StateMachineUpdater: set stopIndex = 22
2019-09-26 13:34:59,993 INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(113)) - s2: Completed APPEND_ENTRIES, lastRequest: s1->s2#26-t1, previous=(t:1, i:22), leaderCommit=22, initializing? false, entries: <empty>
2019-09-26 13:34:59,994 INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(113)) - s0: Completed APPEND_ENTRIES, lastRequest: s1->s0#26-t1, previous=(t:1, i:22), leaderCommit=22, initializing? false, entries: <empty>
2019-09-26 13:34:59,993 INFO  impl.RaftServerImpl (ServerState.java:close(386)) - s0@group-9EC73927C2EA: closes. applyIndex: 22
2019-09-26 13:34:59,994 INFO  impl.RaftServerImpl (ServerState.java:close(386)) - s1@group-9EC73927C2EA: closes. applyIndex: 22
2019-09-26 13:34:59,994 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(313)) - s0@group-9EC73927C2EA-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-09-26 13:34:59,994 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(228)) - s2@group-9EC73927C2EA-SegmentedRaftLogWorker close()
2019-09-26 13:34:59,994 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(313)) - s1@group-9EC73927C2EA-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-09-26 13:34:59,994 INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(293)) - s1@group-9EC73927C2EA->s2-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2019-09-26 13:34:59,995 INFO  server.GrpcService (GrpcService.java:closeImpl(164)) - s2: shutdown server with port 41691 now
2019-09-26 13:34:59,996 INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(293)) - s1@group-9EC73927C2EA->s0-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2019-09-26 13:34:59,996 INFO  server.GrpcService (GrpcService.java:closeImpl(172)) - s2: shutdown server with port 41691 successfully
2019-09-26 13:34:59,996 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(228)) - s0@group-9EC73927C2EA-SegmentedRaftLogWorker close()
2019-09-26 13:34:59,996 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(228)) - s1@group-9EC73927C2EA-SegmentedRaftLogWorker close()
2019-09-26 13:34:59,996 INFO  server.GrpcService (GrpcService.java:closeImpl(164)) - s0: shutdown server with port 34568 now
2019-09-26 13:34:59,996 INFO  impl.FollowerInfo (FollowerInfo.java:lambda$new$0(51)) - s1@group-9EC73927C2EA->s2: nextIndex: updateUnconditionally 23 -> 22
2019-09-26 13:34:59,997 INFO  server.GrpcService (GrpcService.java:closeImpl(172)) - s0: shutdown server with port 34568 successfully
2019-09-26 13:34:59,997 INFO  impl.FollowerInfo (FollowerInfo.java:lambda$new$0(51)) - s1@group-9EC73927C2EA->s0: nextIndex: updateUnconditionally 23 -> 22
2019-09-26 13:34:59,996 INFO  server.GrpcService (GrpcService.java:closeImpl(164)) - s1: shutdown server with port 33959 now
2019-09-26 13:34:59,997 INFO  server.GrpcService (GrpcService.java:closeImpl(172)) - s1: shutdown server with port 33959 successfully
2019-09-26 13:34:59,998 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(722)) - MiniRaftClusterWithGrpc shutdown completed
2019-09-26 13:34:59,998 INFO  util.LogUtils (LogUtils.java:setLogLevel(41)) - Set org.apache.ratis.conf.ConfUtils log level to WARN
2019-09-26 13:34:59,998 INFO  util.LogUtils (LogUtils.java:setLogLevel(41)) - Set org.apache.ratis.util.FileUtils log level to TRACE
2019-09-26 13:34:59,999 INFO  logservice.LogServiceReadWriteBase (LogServiceReadWriteBase.java:<init>(65)) - Set LogStateMachine OK
2019-09-26 13:34:59,999 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:<init>(253)) - new MiniRaftClusterWithGrpc with group-B3249EA02F75:[s0:0.0.0.0:33769, s1:0.0.0.0:42867, s2:0.0.0.0:34302]
2019-09-26 13:34:59,999 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:start(287)) - .............................................................. 
2019-09-26 13:35:00,000 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:start(288)) - ... 
2019-09-26 13:35:00,000 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:start(289)) - ...     Starting MiniRaftClusterWithGrpc
2019-09-26 13:35:00,000 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:start(290)) - ... 
2019-09-26 13:35:00,000 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:start(291)) - .............................................................. 
2019-09-26 13:35:00,000 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:initServers(265)) - servers = {}
2019-09-26 13:35:00,000 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(330)) - newRaftServer: s0, group-B3249EA02F75:[s0:0.0.0.0:33769, s1:0.0.0.0:42867, s2:0.0.0.0:34302], format? true
2019-09-26 13:35:00,000 TRACE util.FileUtils (FileUtils.java:deleteFully(88)) - deleteFully target/test/data/edf3c5cf/MiniRaftClusterWithGrpc1f62847a/s0
2019-09-26 13:35:00,001 TRACE util.FileUtils (FileUtils.java:deleteFully(104)) - deleteFully: target/test/data/edf3c5cf/MiniRaftClusterWithGrpc1f62847a/s0 does not exist.
2019-09-26 13:35:00,001 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(335)) - Formatted directory target/test/data/edf3c5cf/MiniRaftClusterWithGrpc1f62847a/s0
2019-09-26 13:35:00,001 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-09-26 13:35:00,001 INFO  grpc.GrpcFactory (GrpcFactory.java:checkPooledByteBufAllocatorUseCacheForAllThreads(45)) - PERFORMANCE WARNING: useCacheForAllThreads is true that may cause Netty to create a lot garbage objects and, as a result, trigger GC.
	It is recommended to disable useCacheForAllThreads by setting -Dorg.apache.ratis.thirdparty.io.netty.allocator.useCacheForAllThreads=false in command line.
2019-09-26 13:35:00,001 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 33769 (custom)
2019-09-26 13:35:00,002 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2019-09-26 13:35:00,002 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-26 13:35:00,002 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-09-26 13:35:00,002 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-09-26 13:35:00,003 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc1f62847a/s0] (custom)
2019-09-26 13:35:00,003 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - s0: addNew group-B3249EA02F75:[s0:0.0.0.0:33769, s1:0.0.0.0:42867, s2:0.0.0.0:34302] returns group-B3249EA02F75:java.util.concurrent.CompletableFuture@65a6650a[Not completed]
2019-09-26 13:35:00,003 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(330)) - newRaftServer: s1, group-B3249EA02F75:[s0:0.0.0.0:33769, s1:0.0.0.0:42867, s2:0.0.0.0:34302], format? true
2019-09-26 13:35:00,003 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(95)) - s0: new RaftServerImpl for group-B3249EA02F75:[s0:0.0.0.0:33769, s1:0.0.0.0:42867, s2:0.0.0.0:34302] with LogStateMachine:uninitialized
2019-09-26 13:35:00,004 TRACE util.FileUtils (FileUtils.java:deleteFully(88)) - deleteFully target/test/data/edf3c5cf/MiniRaftClusterWithGrpc1f62847a/s1
2019-09-26 13:35:00,004 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 150ms (default)
2019-09-26 13:35:00,004 TRACE util.FileUtils (FileUtils.java:deleteFully(104)) - deleteFully: target/test/data/edf3c5cf/MiniRaftClusterWithGrpc1f62847a/s1 does not exist.
2019-09-26 13:35:00,004 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 300ms (default)
2019-09-26 13:35:00,004 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(335)) - Formatted directory target/test/data/edf3c5cf/MiniRaftClusterWithGrpc1f62847a/s1
2019-09-26 13:35:00,004 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 60s (default)
2019-09-26 13:35:00,005 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.sleep.deviation.threshold = 300 (default)
2019-09-26 13:35:00,005 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-09-26 13:35:00,005 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-09-26 13:35:00,005 INFO  grpc.GrpcFactory (GrpcFactory.java:checkPooledByteBufAllocatorUseCacheForAllThreads(45)) - PERFORMANCE WARNING: useCacheForAllThreads is true that may cause Netty to create a lot garbage objects and, as a result, trigger GC.
	It is recommended to disable useCacheForAllThreads by setting -Dorg.apache.ratis.thirdparty.io.netty.allocator.useCacheForAllThreads=false in command line.
2019-09-26 13:35:00,005 INFO  impl.RaftServerImpl (ServerState.java:<init>(103)) - s0@group-B3249EA02F75: ConfigurationManager, init=-1: [s0:0.0.0.0:33769, s1:0.0.0.0:42867, s2:0.0.0.0:34302], old=null, confs=<EMPTY_MAP>
2019-09-26 13:35:00,005 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 42867 (custom)
2019-09-26 13:35:00,005 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc1f62847a/s0] (custom)
2019-09-26 13:35:00,005 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2019-09-26 13:35:00,006 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.corruption.policy = EXCEPTION (default)
2019-09-26 13:35:00,006 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-26 13:35:00,006 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc1f62847a/s0/45cd2405-f6f1-4d40-a413-b3249ea02f75 does not exist. Creating ...
2019-09-26 13:35:00,006 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-09-26 13:35:00,006 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-09-26 13:35:00,006 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc1f62847a/s0/45cd2405-f6f1-4d40-a413-b3249ea02f75
2019-09-26 13:35:00,007 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc1f62847a/s1] (custom)
2019-09-26 13:35:00,007 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - s1: addNew group-B3249EA02F75:[s0:0.0.0.0:33769, s1:0.0.0.0:42867, s2:0.0.0.0:34302] returns group-B3249EA02F75:java.util.concurrent.CompletableFuture@53513b10[Not completed]
2019-09-26 13:35:00,007 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(95)) - s1: new RaftServerImpl for group-B3249EA02F75:[s0:0.0.0.0:33769, s1:0.0.0.0:42867, s2:0.0.0.0:34302] with LogStateMachine:uninitialized
2019-09-26 13:35:00,007 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(330)) - newRaftServer: s2, group-B3249EA02F75:[s0:0.0.0.0:33769, s1:0.0.0.0:42867, s2:0.0.0.0:34302], format? true
2019-09-26 13:35:00,007 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 150ms (default)
2019-09-26 13:35:00,008 TRACE util.FileUtils (FileUtils.java:deleteFully(88)) - deleteFully target/test/data/edf3c5cf/MiniRaftClusterWithGrpc1f62847a/s2
2019-09-26 13:35:00,008 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 300ms (default)
2019-09-26 13:35:00,008 TRACE util.FileUtils (FileUtils.java:deleteFully(104)) - deleteFully: target/test/data/edf3c5cf/MiniRaftClusterWithGrpc1f62847a/s2 does not exist.
2019-09-26 13:35:00,008 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 60s (default)
2019-09-26 13:35:00,008 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(335)) - Formatted directory target/test/data/edf3c5cf/MiniRaftClusterWithGrpc1f62847a/s2
2019-09-26 13:35:00,008 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.sleep.deviation.threshold = 300 (default)
2019-09-26 13:35:00,008 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-09-26 13:35:00,008 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-09-26 13:35:00,008 INFO  impl.RaftServerImpl (ServerState.java:<init>(103)) - s1@group-B3249EA02F75: ConfigurationManager, init=-1: [s0:0.0.0.0:33769, s1:0.0.0.0:42867, s2:0.0.0.0:34302], old=null, confs=<EMPTY_MAP>
2019-09-26 13:35:00,009 INFO  grpc.GrpcFactory (GrpcFactory.java:checkPooledByteBufAllocatorUseCacheForAllThreads(45)) - PERFORMANCE WARNING: useCacheForAllThreads is true that may cause Netty to create a lot garbage objects and, as a result, trigger GC.
	It is recommended to disable useCacheForAllThreads by setting -Dorg.apache.ratis.thirdparty.io.netty.allocator.useCacheForAllThreads=false in command line.
2019-09-26 13:35:00,009 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc1f62847a/s1] (custom)
2019-09-26 13:35:00,009 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 34302 (custom)
2019-09-26 13:35:00,009 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.corruption.policy = EXCEPTION (default)
2019-09-26 13:35:00,009 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2019-09-26 13:35:00,009 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc1f62847a/s1/45cd2405-f6f1-4d40-a413-b3249ea02f75 does not exist. Creating ...
2019-09-26 13:35:00,009 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-26 13:35:00,009 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-09-26 13:35:00,010 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-09-26 13:35:00,010 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc1f62847a/s2] (custom)
2019-09-26 13:35:00,010 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc1f62847a/s1/45cd2405-f6f1-4d40-a413-b3249ea02f75
2019-09-26 13:35:00,010 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - s2: addNew group-B3249EA02F75:[s0:0.0.0.0:33769, s1:0.0.0.0:42867, s2:0.0.0.0:34302] returns group-B3249EA02F75:java.util.concurrent.CompletableFuture@1286b363[Not completed]
2019-09-26 13:35:00,011 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(95)) - s2: new RaftServerImpl for group-B3249EA02F75:[s0:0.0.0.0:33769, s1:0.0.0.0:42867, s2:0.0.0.0:34302] with LogStateMachine:uninitialized
2019-09-26 13:35:00,011 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 150ms (default)
2019-09-26 13:35:00,011 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 300ms (default)
2019-09-26 13:35:00,011 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc1f62847a/s0/45cd2405-f6f1-4d40-a413-b3249ea02f75/in_use.lock acquired by nodename 10855@ratis-test-j9cz4-1458154678
2019-09-26 13:35:00,011 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 60s (default)
2019-09-26 13:35:00,011 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.sleep.deviation.threshold = 300 (default)
2019-09-26 13:35:00,011 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc1f62847a/s0/45cd2405-f6f1-4d40-a413-b3249ea02f75/current
2019-09-26 13:35:00,011 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-09-26 13:35:00,012 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc1f62847a/s0/45cd2405-f6f1-4d40-a413-b3249ea02f75/sm
2019-09-26 13:35:00,012 INFO  impl.RaftServerImpl (ServerState.java:<init>(103)) - s2@group-B3249EA02F75: ConfigurationManager, init=-1: [s0:0.0.0.0:33769, s1:0.0.0.0:42867, s2:0.0.0.0:34302], old=null, confs=<EMPTY_MAP>
2019-09-26 13:35:00,012 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc1f62847a/s2] (custom)
2019-09-26 13:35:00,012 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.corruption.policy = EXCEPTION (default)
2019-09-26 13:35:00,012 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc1f62847a/s2/45cd2405-f6f1-4d40-a413-b3249ea02f75 does not exist. Creating ...
2019-09-26 13:35:00,013 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc1f62847a/s2/45cd2405-f6f1-4d40-a413-b3249ea02f75
2019-09-26 13:35:00,013 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc1f62847a/s1/45cd2405-f6f1-4d40-a413-b3249ea02f75/in_use.lock acquired by nodename 10855@ratis-test-j9cz4-1458154678
2019-09-26 13:35:00,013 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc1f62847a/s1/45cd2405-f6f1-4d40-a413-b3249ea02f75/current
2019-09-26 13:35:00,014 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc1f62847a/s1/45cd2405-f6f1-4d40-a413-b3249ea02f75/sm
2019-09-26 13:35:00,016 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc1f62847a/s2/45cd2405-f6f1-4d40-a413-b3249ea02f75/in_use.lock acquired by nodename 10855@ratis-test-j9cz4-1458154678
2019-09-26 13:35:00,016 INFO  storage.RaftStorage (RaftStorage.java:format(84)) - Storage directory /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc1f62847a/s0/45cd2405-f6f1-4d40-a413-b3249ea02f75 has been successfully formatted.
2019-09-26 13:35:00,016 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc1f62847a/s2/45cd2405-f6f1-4d40-a413-b3249ea02f75/current
2019-09-26 13:35:00,016 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc1f62847a/s2/45cd2405-f6f1-4d40-a413-b3249ea02f75/sm
2019-09-26 13:35:00,018 WARN  server.LogStateMachine (LogStateMachine.java:load(226)) - The snapshot info is null.
2019-09-26 13:35:00,018 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.notification.no-leader.timeout = 60s (default)
2019-09-26 13:35:00,018 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-09-26 13:35:00,018 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.purge.gap = 1024 (default)
2019-09-26 13:35:00,018 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-26 13:35:00,018 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2019-09-26 13:35:00,019 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 6 (default)
2019-09-26 13:35:00,019 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(172)) - new s0@group-B3249EA02F75-SegmentedRaftLogWorker for RaftStorage:Storage Directory /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc1f62847a/s0/45cd2405-f6f1-4d40-a413-b3249ea02f75
2019-09-26 13:35:00,019 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2019-09-26 13:35:00,019 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 4096 (default)
2019-09-26 13:35:00,019 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2019-09-26 13:35:00,019 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2019-09-26 13:35:00,019 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2019-09-26 13:35:00,019 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-09-26 13:35:00,019 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-09-26 13:35:00,020 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-09-26 13:35:00,020 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-09-26 13:35:00,020 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2019-09-26 13:35:00,020 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(132)) - s0@group-B3249EA02F75-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2019-09-26 13:35:00,020 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2019-09-26 13:35:00,020 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.retention.file.num = -1 (default)
2019-09-26 13:35:00,020 INFO  storage.RaftStorage (RaftStorage.java:format(84)) - Storage directory /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc1f62847a/s2/45cd2405-f6f1-4d40-a413-b3249ea02f75 has been successfully formatted.
2019-09-26 13:35:00,021 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 60s (default)
2019-09-26 13:35:00,020 INFO  storage.RaftStorage (RaftStorage.java:format(84)) - Storage directory /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc1f62847a/s1/45cd2405-f6f1-4d40-a413-b3249ea02f75 has been successfully formatted.
2019-09-26 13:35:00,022 WARN  server.LogStateMachine (LogStateMachine.java:load(226)) - The snapshot info is null.
2019-09-26 13:35:00,022 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.notification.no-leader.timeout = 60s (default)
2019-09-26 13:35:00,022 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-09-26 13:35:00,022 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.purge.gap = 1024 (default)
2019-09-26 13:35:00,022 WARN  server.LogStateMachine (LogStateMachine.java:load(226)) - The snapshot info is null.
2019-09-26 13:35:00,022 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-26 13:35:00,022 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.notification.no-leader.timeout = 60s (default)
2019-09-26 13:35:00,023 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2019-09-26 13:35:00,023 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-09-26 13:35:00,023 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 6 (default)
2019-09-26 13:35:00,023 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.purge.gap = 1024 (default)
2019-09-26 13:35:00,023 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(172)) - new s2@group-B3249EA02F75-SegmentedRaftLogWorker for RaftStorage:Storage Directory /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc1f62847a/s2/45cd2405-f6f1-4d40-a413-b3249ea02f75
2019-09-26 13:35:00,023 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-26 13:35:00,023 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2019-09-26 13:35:00,023 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2019-09-26 13:35:00,023 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 4096 (default)
2019-09-26 13:35:00,023 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 6 (default)
2019-09-26 13:35:00,023 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2019-09-26 13:35:00,024 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(181)) - s0@group-B3249EA02F75: start as a follower, conf=-1: [s0:0.0.0.0:33769, s1:0.0.0.0:42867, s2:0.0.0.0:34302], old=null
2019-09-26 13:35:00,024 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(172)) - new s1@group-B3249EA02F75-SegmentedRaftLogWorker for RaftStorage:Storage Directory /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc1f62847a/s1/45cd2405-f6f1-4d40-a413-b3249ea02f75
2019-09-26 13:35:00,024 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s0@group-B3249EA02F75: changes role from      null to FOLLOWER at term 0 for startAsFollower
2019-09-26 13:35:00,024 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2019-09-26 13:35:00,024 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s0: start FollowerState
2019-09-26 13:35:00,024 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2019-09-26 13:35:00,024 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2019-09-26 13:35:00,025 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 4096 (default)
2019-09-26 13:35:00,025 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-B3249EA02F75,id=s0
2019-09-26 13:35:00,025 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-09-26 13:35:00,025 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2019-09-26 13:35:00,025 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-09-26 13:35:00,025 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2019-09-26 13:35:00,025 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-09-26 13:35:00,025 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2019-09-26 13:35:00,025 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-09-26 13:35:00,026 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-09-26 13:35:00,026 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2019-09-26 13:35:00,026 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-09-26 13:35:00,026 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-09-26 13:35:00,026 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(132)) - s2@group-B3249EA02F75-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2019-09-26 13:35:00,026 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-09-26 13:35:00,026 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2019-09-26 13:35:00,026 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2019-09-26 13:35:00,026 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.retention.file.num = -1 (default)
2019-09-26 13:35:00,027 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 60s (default)
2019-09-26 13:35:00,027 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(132)) - s1@group-B3249EA02F75-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2019-09-26 13:35:00,027 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2019-09-26 13:35:00,027 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.retention.file.num = -1 (default)
2019-09-26 13:35:00,027 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 60s (default)
2019-09-26 13:35:00,028 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - s0: start RPC server
2019-09-26 13:35:00,029 INFO  server.GrpcService (GrpcService.java:startImpl(158)) - s0: GrpcService started, listening on 0.0.0.0/0.0.0.0:33769
2019-09-26 13:35:00,030 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(181)) - s1@group-B3249EA02F75: start as a follower, conf=-1: [s0:0.0.0.0:33769, s1:0.0.0.0:42867, s2:0.0.0.0:34302], old=null
2019-09-26 13:35:00,030 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s1@group-B3249EA02F75: changes role from      null to FOLLOWER at term 0 for startAsFollower
2019-09-26 13:35:00,031 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s1: start FollowerState
2019-09-26 13:35:00,031 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-B3249EA02F75,id=s1
2019-09-26 13:35:00,033 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - s1: start RPC server
2019-09-26 13:35:00,034 INFO  server.GrpcService (GrpcService.java:startImpl(158)) - s1: GrpcService started, listening on 0.0.0.0/0.0.0.0:42867
2019-09-26 13:35:00,034 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(181)) - s2@group-B3249EA02F75: start as a follower, conf=-1: [s0:0.0.0.0:33769, s1:0.0.0.0:42867, s2:0.0.0.0:34302], old=null
2019-09-26 13:35:00,035 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s2@group-B3249EA02F75: changes role from      null to FOLLOWER at term 0 for startAsFollower
2019-09-26 13:35:00,035 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s2: start FollowerState
2019-09-26 13:35:00,035 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-B3249EA02F75,id=s2
2019-09-26 13:35:00,038 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - s2: start RPC server
2019-09-26 13:35:00,038 INFO  server.GrpcService (GrpcService.java:startImpl(158)) - s2: GrpcService started, listening on 0.0.0.0/0.0.0.0:34302
2019-09-26 13:35:00,039 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 300ms (default)
2019-09-26 13:35:00,039 INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(86)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-B3249EA02F75:t0, leader=null, voted=null, raftlog=s0@group-B3249EA02F75-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:33769, s1:0.0.0.0:42867, s2:0.0.0.0:34302], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-B3249EA02F75:t0, leader=null, voted=null, raftlog=s1@group-B3249EA02F75-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:33769, s1:0.0.0.0:42867, s2:0.0.0.0:34302], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-B3249EA02F75:t0, leader=null, voted=null, raftlog=s2@group-B3249EA02F75-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:33769, s1:0.0.0.0:42867, s2:0.0.0.0:34302], old=null RUNNING
2019-09-26 13:35:00,039 WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(158)) - FAILED "waitForLeader-null-(expectLeader? true)", attempt #1/100: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-B3249EA02F75:t0, leader=null, voted=null, raftlog=s0@group-B3249EA02F75-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:33769, s1:0.0.0.0:42867, s2:0.0.0.0:34302], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-B3249EA02F75:t0, leader=null, voted=null, raftlog=s1@group-B3249EA02F75-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:33769, s1:0.0.0.0:42867, s2:0.0.0.0:34302], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-B3249EA02F75:t0, leader=null, voted=null, raftlog=s2@group-B3249EA02F75-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:33769, s1:0.0.0.0:42867, s2:0.0.0.0:34302], old=null RUNNING, sleep 450ms and then retry.
java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-B3249EA02F75:t0, leader=null, voted=null, raftlog=s0@group-B3249EA02F75-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:33769, s1:0.0.0.0:42867, s2:0.0.0.0:34302], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-B3249EA02F75:t0, leader=null, voted=null, raftlog=s1@group-B3249EA02F75-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:33769, s1:0.0.0.0:42867, s2:0.0.0.0:34302], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-B3249EA02F75:t0, leader=null, voted=null, raftlog=s2@group-B3249EA02F75-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:33769, s1:0.0.0.0:42867, s2:0.0.0.0:34302], old=null RUNNING
	at org.apache.ratis.MiniRaftCluster.newIllegalStateExceptionForNoLeaders(MiniRaftCluster.java:506)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$1(RaftTestUtil.java:90)
	at org.apache.ratis.MiniRaftCluster.getLeader(MiniRaftCluster.java:539)
	at org.apache.ratis.MiniRaftCluster.getLeader(MiniRaftCluster.java:532)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$3(RaftTestUtil.java:98)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:152)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:97)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:77)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:72)
	at org.apache.ratis.logservice.LogServiceReadWriteBase.setUpCluster(LogServiceReadWriteBase.java:116)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:24)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:298)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:292)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:748)
2019-09-26 13:35:00,247 INFO  impl.FollowerState (FollowerState.java:run(108)) - s0@group-B3249EA02F75-FollowerState: change to CANDIDATE, lastRpcTime:222ms, electionTimeout:222ms
2019-09-26 13:35:00,248 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - s0: shutdown FollowerState
2019-09-26 13:35:00,248 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s0@group-B3249EA02F75: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-09-26 13:35:00,248 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s0: start LeaderElection
2019-09-26 13:35:00,254 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(178)) - s0@group-B3249EA02F75-LeaderElection7: begin an election at term 1 for -1: [s0:0.0.0.0:33769, s1:0.0.0.0:42867, s2:0.0.0.0:34302], old=null
2019-09-26 13:35:00,264 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s2@group-B3249EA02F75: changes role from  FOLLOWER to FOLLOWER at term 1 for recognizeCandidate:s0
2019-09-26 13:35:00,264 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s1@group-B3249EA02F75: changes role from  FOLLOWER to FOLLOWER at term 1 for recognizeCandidate:s0
2019-09-26 13:35:00,264 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - s2: shutdown FollowerState
2019-09-26 13:35:00,264 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - s1: shutdown FollowerState
2019-09-26 13:35:00,264 INFO  impl.FollowerState (FollowerState.java:run(117)) - s2@group-B3249EA02F75-FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
2019-09-26 13:35:00,264 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s2: start FollowerState
2019-09-26 13:35:00,265 INFO  impl.FollowerState (FollowerState.java:run(117)) - s1@group-B3249EA02F75-FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
2019-09-26 13:35:00,265 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s1: start FollowerState
2019-09-26 13:35:00,282 INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(56)) - s0@group-B3249EA02F75-LeaderElection7: Election PASSED; received 1 response(s) [s0<-s2#0:OK-t1] and 0 exception(s); s0@group-B3249EA02F75:t1, leader=null, voted=s0, raftlog=s0@group-B3249EA02F75-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:33769, s1:0.0.0.0:42867, s2:0.0.0.0:34302], old=null
2019-09-26 13:35:00,282 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - s0: shutdown LeaderElection
2019-09-26 13:35:00,282 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s0@group-B3249EA02F75: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-09-26 13:35:00,282 INFO  impl.RaftServerImpl (ServerState.java:setLeader(254)) - s0@group-B3249EA02F75: change Leader from null to s0 at term 1 for becomeLeader, leader elected after 264ms
2019-09-26 13:35:00,283 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-09-26 13:35:00,283 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-09-26 13:35:00,283 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.write.element-limit = 4096 (default)
2019-09-26 13:35:00,283 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-09-26 13:35:00,283 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-09-26 13:35:00,283 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.element-limit = 65536 (default)
2019-09-26 13:35:00,286 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2019-09-26 13:35:00,286 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-26 13:35:00,286 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2019-09-26 13:35:00,286 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2019-09-26 13:35:00,286 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-09-26 13:35:00,287 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-09-26 13:35:00,287 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2019-09-26 13:35:00,287 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-26 13:35:00,287 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2019-09-26 13:35:00,287 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2019-09-26 13:35:00,287 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-09-26 13:35:00,287 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-09-26 13:35:00,288 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s0: start LeaderState
2019-09-26 13:35:00,288 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(380)) - s0@group-B3249EA02F75-SegmentedRaftLogWorker: Starting segment from index:0
2019-09-26 13:35:00,289 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(355)) - s0@group-B3249EA02F75: set configuration 0: [s0:0.0.0.0:33769, s1:0.0.0.0:42867, s2:0.0.0.0:34302], old=null at 0
2019-09-26 13:35:00,291 INFO  impl.RaftServerImpl (ServerState.java:setLeader(254)) - s1@group-B3249EA02F75: change Leader from null to s0 at term 1 for appendEntries, leader elected after 268ms
2019-09-26 13:35:00,291 INFO  impl.RaftServerImpl (ServerState.java:setLeader(254)) - s2@group-B3249EA02F75: change Leader from null to s0 at term 1 for appendEntries, leader elected after 268ms
2019-09-26 13:35:00,295 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(355)) - s2@group-B3249EA02F75: set configuration 0: [s0:0.0.0.0:33769, s1:0.0.0.0:42867, s2:0.0.0.0:34302], old=null at 0
2019-09-26 13:35:00,296 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(355)) - s1@group-B3249EA02F75: set configuration 0: [s0:0.0.0.0:33769, s1:0.0.0.0:42867, s2:0.0.0.0:34302], old=null at 0
2019-09-26 13:35:00,296 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(380)) - s2@group-B3249EA02F75-SegmentedRaftLogWorker: Starting segment from index:0
2019-09-26 13:35:00,296 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(380)) - s1@group-B3249EA02F75-SegmentedRaftLogWorker: Starting segment from index:0
2019-09-26 13:35:00,458 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(569)) - s0@group-B3249EA02F75-SegmentedRaftLogWorker: created new log segment /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc1f62847a/s0/45cd2405-f6f1-4d40-a413-b3249ea02f75/current/log_inprogress_0
2019-09-26 13:35:00,458 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(569)) - s2@group-B3249EA02F75-SegmentedRaftLogWorker: created new log segment /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc1f62847a/s2/45cd2405-f6f1-4d40-a413-b3249ea02f75/current/log_inprogress_0
2019-09-26 13:35:00,459 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(569)) - s1@group-B3249EA02F75-SegmentedRaftLogWorker: created new log segment /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpc1f62847a/s1/45cd2405-f6f1-4d40-a413-b3249ea02f75/current/log_inprogress_0
2019-09-26 13:35:00,490 INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(101)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-B3249EA02F75:t1, leader=s0, voted=s0, raftlog=s0@group-B3249EA02F75-SegmentedRaftLog:OPENED:c0,f0,i0, conf=0: [s0:0.0.0.0:33769, s1:0.0.0.0:42867, s2:0.0.0.0:34302], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-B3249EA02F75:t1, leader=s0, voted=s0, raftlog=s1@group-B3249EA02F75-SegmentedRaftLog:OPENED:c-1,f0,i0, conf=0: [s0:0.0.0.0:33769, s1:0.0.0.0:42867, s2:0.0.0.0:34302], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-B3249EA02F75:t1, leader=s0, voted=s0, raftlog=s2@group-B3249EA02F75-SegmentedRaftLog:OPENED:c-1,f0,i0, conf=0: [s0:0.0.0.0:33769, s1:0.0.0.0:42867, s2:0.0.0.0:34302], old=null RUNNING
2019-09-26 13:35:00,491 INFO  logservice.LogServiceReadWriteBase (LogServiceReadWriteBase.java:testSeeking(226)) - Writing 100 records
2019-09-26 13:35:02,009 DEBUG logservice.LogServiceReadWriteBase (LogServiceReadWriteBase.java:testSeeking(233)) - Seek and read'ing records
2019-09-26 13:35:02,010 INFO  logservice.LogServiceReadWriteBase (LogServiceReadWriteBase.java:testSeeking(236)) - Seeking to 9
2019-09-26 13:35:02,010 INFO  logservice.LogServiceReadWriteBase (LogServiceReadWriteBase.java:testSeeking(238)) - Reading one record
2019-09-26 13:35:02,012 INFO  logservice.LogServiceReadWriteBase (LogServiceReadWriteBase.java:testSeeking(236)) - Seeking to 19
2019-09-26 13:35:02,012 INFO  logservice.LogServiceReadWriteBase (LogServiceReadWriteBase.java:testSeeking(238)) - Reading one record
2019-09-26 13:35:02,015 INFO  logservice.LogServiceReadWriteBase (LogServiceReadWriteBase.java:testSeeking(236)) - Seeking to 29
2019-09-26 13:35:02,015 INFO  logservice.LogServiceReadWriteBase (LogServiceReadWriteBase.java:testSeeking(238)) - Reading one record
2019-09-26 13:35:02,017 INFO  logservice.LogServiceReadWriteBase (LogServiceReadWriteBase.java:testSeeking(236)) - Seeking to 39
2019-09-26 13:35:02,017 INFO  logservice.LogServiceReadWriteBase (LogServiceReadWriteBase.java:testSeeking(238)) - Reading one record
2019-09-26 13:35:02,019 INFO  logservice.LogServiceReadWriteBase (LogServiceReadWriteBase.java:testSeeking(236)) - Seeking to 49
2019-09-26 13:35:02,019 INFO  logservice.LogServiceReadWriteBase (LogServiceReadWriteBase.java:testSeeking(238)) - Reading one record
2019-09-26 13:35:02,021 INFO  logservice.LogServiceReadWriteBase (LogServiceReadWriteBase.java:testSeeking(236)) - Seeking to 59
2019-09-26 13:35:02,021 INFO  logservice.LogServiceReadWriteBase (LogServiceReadWriteBase.java:testSeeking(238)) - Reading one record
2019-09-26 13:35:02,023 INFO  logservice.LogServiceReadWriteBase (LogServiceReadWriteBase.java:testSeeking(236)) - Seeking to 69
2019-09-26 13:35:02,023 INFO  logservice.LogServiceReadWriteBase (LogServiceReadWriteBase.java:testSeeking(238)) - Reading one record
2019-09-26 13:35:02,025 INFO  logservice.LogServiceReadWriteBase (LogServiceReadWriteBase.java:testSeeking(236)) - Seeking to 79
2019-09-26 13:35:02,025 INFO  logservice.LogServiceReadWriteBase (LogServiceReadWriteBase.java:testSeeking(238)) - Reading one record
2019-09-26 13:35:02,027 INFO  logservice.LogServiceReadWriteBase (LogServiceReadWriteBase.java:testSeeking(236)) - Seeking to 89
2019-09-26 13:35:02,028 INFO  logservice.LogServiceReadWriteBase (LogServiceReadWriteBase.java:testSeeking(238)) - Reading one record
2019-09-26 13:35:02,030 INFO  logservice.LogServiceReadWriteBase (LogServiceReadWriteBase.java:testSeeking(236)) - Seeking to 99
2019-09-26 13:35:02,030 INFO  logservice.LogServiceReadWriteBase (LogServiceReadWriteBase.java:testSeeking(238)) - Reading one record
2019-09-26 13:35:02,032 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(700)) - ************************************************************** 
2019-09-26 13:35:02,032 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(701)) - *** 
2019-09-26 13:35:02,032 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(702)) - ***     Stopping MiniRaftClusterWithGrpc
2019-09-26 13:35:02,032 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(703)) - *** 
2019-09-26 13:35:02,033 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(704)) - ************************************************************** 
2019-09-26 13:35:02,033 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(705)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-B3249EA02F75:t1, leader=s0, voted=s0, raftlog=s0@group-B3249EA02F75-SegmentedRaftLog:OPENED:c199,f199,i200, conf=0: [s0:0.0.0.0:33769, s1:0.0.0.0:42867, s2:0.0.0.0:34302], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-B3249EA02F75:t1, leader=s0, voted=s0, raftlog=s1@group-B3249EA02F75-SegmentedRaftLog:OPENED:c197,f199,i200, conf=0: [s0:0.0.0.0:33769, s1:0.0.0.0:42867, s2:0.0.0.0:34302], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-B3249EA02F75:t1, leader=s0, voted=s0, raftlog=s2@group-B3249EA02F75-SegmentedRaftLog:OPENED:c197,f199,i200, conf=0: [s0:0.0.0.0:33769, s1:0.0.0.0:42867, s2:0.0.0.0:34302], old=null RUNNING
2019-09-26 13:35:02,034 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - s0: close
2019-09-26 13:35:02,034 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - s1: close
2019-09-26 13:35:02,035 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - s2: close
2019-09-26 13:35:02,035 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(247)) - s0@group-B3249EA02F75: shutdown
2019-09-26 13:35:02,035 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(247)) - s1@group-B3249EA02F75: shutdown
2019-09-26 13:35:02,036 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(247)) - s2@group-B3249EA02F75: shutdown
2019-09-26 13:35:02,036 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-B3249EA02F75,id=s1
2019-09-26 13:35:02,036 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-B3249EA02F75,id=s0
2019-09-26 13:35:02,036 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - s1: shutdown FollowerState
2019-09-26 13:35:02,036 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-B3249EA02F75,id=s2
2019-09-26 13:35:02,037 INFO  impl.FollowerState (FollowerState.java:run(117)) - s1@group-B3249EA02F75-FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
2019-09-26 13:35:02,036 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(136)) - s1@group-B3249EA02F75-StateMachineUpdater: set stopIndex = 197
2019-09-26 13:35:02,036 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - s0: shutdown LeaderState
2019-09-26 13:35:02,037 INFO  impl.RaftServerImpl (ServerState.java:close(386)) - s1@group-B3249EA02F75: closes. applyIndex: 197
2019-09-26 13:35:02,038 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(202)) - s0@group-B3249EA02F75-PendingRequests: sendNotLeaderResponses
2019-09-26 13:35:02,037 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - s2: shutdown FollowerState
2019-09-26 13:35:02,039 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(136)) - s0@group-B3249EA02F75-StateMachineUpdater: set stopIndex = 199
2019-09-26 13:35:02,038 WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(143)) - s0@group-B3249EA02F75->s1-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2019-09-26 13:35:02,038 WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(143)) - s0@group-B3249EA02F75->s2-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2019-09-26 13:35:02,039 INFO  impl.RaftServerImpl (ServerState.java:close(386)) - s0@group-B3249EA02F75: closes. applyIndex: 199
2019-09-26 13:35:02,039 INFO  impl.FollowerState (FollowerState.java:run(117)) - s2@group-B3249EA02F75-FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
2019-09-26 13:35:02,039 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(136)) - s2@group-B3249EA02F75-StateMachineUpdater: set stopIndex = 197
2019-09-26 13:35:02,041 INFO  impl.RaftServerImpl (ServerState.java:close(386)) - s2@group-B3249EA02F75: closes. applyIndex: 197
2019-09-26 13:35:02,042 INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(113)) - s1: Completed APPEND_ENTRIES, lastRequest: s0->s1#204-t1, previous=(t:1, i:199), leaderCommit=199, initializing? false, entries: size=1, first=(t:1, i:200), METADATAENTRY(c199)
2019-09-26 13:35:02,042 INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(113)) - s2: Completed APPEND_ENTRIES, lastRequest: s0->s2#204-t1, previous=(t:1, i:199), leaderCommit=199, initializing? false, entries: size=1, first=(t:1, i:200), METADATAENTRY(c199)
2019-09-26 13:35:02,043 INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(293)) - s0@group-B3249EA02F75->s1-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2019-09-26 13:35:02,043 INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(293)) - s0@group-B3249EA02F75->s2-AppendLogResponseHandler: follower responses appendEntries COMPLETED
Sep 26, 2019 1:35:02 PM org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference cleanQueue
SEVERE: *~*~*~ Channel ManagedChannelImpl{logId=84, target=0.0.0.0:33959} was not shutdown properly!!! ~*~*~*
    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.
java.lang.RuntimeException: ManagedChannel allocation site
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.<init>(ManagedChannelOrphanWrapper.java:103)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:53)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:44)
	at org.apache.ratis.thirdparty.io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:411)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.<init>(GrpcClientProtocolClient.java:128)
	at org.apache.ratis.grpc.client.GrpcClientRpc.lambda$new$0(GrpcClientRpc.java:55)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.lambda$getProxy$0(PeerProxyMap.java:61)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:202)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:60)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:108)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:91)
	at org.apache.ratis.client.impl.RaftClientImpl.sendRequest(RaftClientImpl.java:278)
	at org.apache.ratis.client.impl.RaftClientImpl.sendRequestWithRetry(RaftClientImpl.java:246)
	at org.apache.ratis.client.impl.RaftClientImpl.send(RaftClientImpl.java:182)
	at org.apache.ratis.client.impl.RaftClientImpl.send(RaftClientImpl.java:156)
	at org.apache.ratis.logservice.impl.LogWriterImpl.write(LogWriterImpl.java:70)
	at org.apache.ratis.logservice.LogServiceReadWriteBase.testSeekFromWrite(LogServiceReadWriteBase.java:269)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:298)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:292)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:748)

2019-09-26 13:35:02,046 INFO  impl.FollowerInfo (FollowerInfo.java:lambda$new$0(51)) - s0@group-B3249EA02F75->s1: nextIndex: updateUnconditionally 201 -> 200
2019-09-26 13:35:02,046 INFO  impl.FollowerInfo (FollowerInfo.java:lambda$new$0(51)) - s0@group-B3249EA02F75->s2: nextIndex: updateUnconditionally 201 -> 200
2019-09-26 13:35:02,070 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(228)) - s1@group-B3249EA02F75-SegmentedRaftLogWorker close()
2019-09-26 13:35:02,070 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(228)) - s2@group-B3249EA02F75-SegmentedRaftLogWorker close()
2019-09-26 13:35:02,071 INFO  server.GrpcService (GrpcService.java:closeImpl(164)) - s1: shutdown server with port 42867 now
2019-09-26 13:35:02,070 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(228)) - s0@group-B3249EA02F75-SegmentedRaftLogWorker close()
2019-09-26 13:35:02,073 INFO  server.GrpcService (GrpcService.java:closeImpl(164)) - s2: shutdown server with port 34302 now
2019-09-26 13:35:02,073 INFO  server.GrpcService (GrpcService.java:closeImpl(172)) - s1: shutdown server with port 42867 successfully
2019-09-26 13:35:02,074 INFO  server.GrpcService (GrpcService.java:closeImpl(172)) - s2: shutdown server with port 34302 successfully
2019-09-26 13:35:02,074 INFO  server.GrpcService (GrpcService.java:closeImpl(164)) - s0: shutdown server with port 33769 now
2019-09-26 13:35:02,075 INFO  server.GrpcService (GrpcService.java:closeImpl(172)) - s0: shutdown server with port 33769 successfully
2019-09-26 13:35:02,076 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(722)) - MiniRaftClusterWithGrpc shutdown completed
2019-09-26 13:35:02,091 INFO  util.LogUtils (LogUtils.java:setLogLevel(41)) - Set org.apache.ratis.conf.ConfUtils log level to WARN
2019-09-26 13:35:02,091 INFO  util.LogUtils (LogUtils.java:setLogLevel(41)) - Set org.apache.ratis.util.FileUtils log level to TRACE
2019-09-26 13:35:02,091 INFO  logservice.LogServiceReadWriteBase (LogServiceReadWriteBase.java:<init>(65)) - Set LogStateMachine OK
2019-09-26 13:35:02,092 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:<init>(253)) - new MiniRaftClusterWithGrpc with group-1F55CC8EEEEA:[s0:0.0.0.0:33592, s1:0.0.0.0:40407, s2:0.0.0.0:39056]
2019-09-26 13:35:02,093 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:start(287)) - .............................................................. 
2019-09-26 13:35:02,093 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:start(288)) - ... 
2019-09-26 13:35:02,093 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:start(289)) - ...     Starting MiniRaftClusterWithGrpc
2019-09-26 13:35:02,093 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:start(290)) - ... 
2019-09-26 13:35:02,093 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:start(291)) - .............................................................. 
2019-09-26 13:35:02,093 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:initServers(265)) - servers = {}
2019-09-26 13:35:02,093 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(330)) - newRaftServer: s0, group-1F55CC8EEEEA:[s0:0.0.0.0:33592, s1:0.0.0.0:40407, s2:0.0.0.0:39056], format? true
2019-09-26 13:35:02,094 TRACE util.FileUtils (FileUtils.java:deleteFully(88)) - deleteFully target/test/data/edf3c5cf/MiniRaftClusterWithGrpcd70f4d6e/s0
2019-09-26 13:35:02,094 TRACE util.FileUtils (FileUtils.java:deleteFully(104)) - deleteFully: target/test/data/edf3c5cf/MiniRaftClusterWithGrpcd70f4d6e/s0 does not exist.
2019-09-26 13:35:02,094 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(335)) - Formatted directory target/test/data/edf3c5cf/MiniRaftClusterWithGrpcd70f4d6e/s0
2019-09-26 13:35:02,095 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-09-26 13:35:02,095 INFO  grpc.GrpcFactory (GrpcFactory.java:checkPooledByteBufAllocatorUseCacheForAllThreads(45)) - PERFORMANCE WARNING: useCacheForAllThreads is true that may cause Netty to create a lot garbage objects and, as a result, trigger GC.
	It is recommended to disable useCacheForAllThreads by setting -Dorg.apache.ratis.thirdparty.io.netty.allocator.useCacheForAllThreads=false in command line.
2019-09-26 13:35:02,096 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 33592 (custom)
2019-09-26 13:35:02,096 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2019-09-26 13:35:02,096 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-26 13:35:02,096 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-09-26 13:35:02,097 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-09-26 13:35:02,098 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcd70f4d6e/s0] (custom)
2019-09-26 13:35:02,098 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - s0: addNew group-1F55CC8EEEEA:[s0:0.0.0.0:33592, s1:0.0.0.0:40407, s2:0.0.0.0:39056] returns group-1F55CC8EEEEA:java.util.concurrent.CompletableFuture@35a83b36[Not completed]
2019-09-26 13:35:02,099 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(330)) - newRaftServer: s1, group-1F55CC8EEEEA:[s0:0.0.0.0:33592, s1:0.0.0.0:40407, s2:0.0.0.0:39056], format? true
2019-09-26 13:35:02,099 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(95)) - s0: new RaftServerImpl for group-1F55CC8EEEEA:[s0:0.0.0.0:33592, s1:0.0.0.0:40407, s2:0.0.0.0:39056] with LogStateMachine:uninitialized
2019-09-26 13:35:02,099 TRACE util.FileUtils (FileUtils.java:deleteFully(88)) - deleteFully target/test/data/edf3c5cf/MiniRaftClusterWithGrpcd70f4d6e/s1
2019-09-26 13:35:02,099 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 150ms (default)
2019-09-26 13:35:02,099 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 300ms (default)
2019-09-26 13:35:02,099 TRACE util.FileUtils (FileUtils.java:deleteFully(104)) - deleteFully: target/test/data/edf3c5cf/MiniRaftClusterWithGrpcd70f4d6e/s1 does not exist.
2019-09-26 13:35:02,099 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 60s (default)
2019-09-26 13:35:02,100 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(335)) - Formatted directory target/test/data/edf3c5cf/MiniRaftClusterWithGrpcd70f4d6e/s1
2019-09-26 13:35:02,100 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.sleep.deviation.threshold = 300 (default)
2019-09-26 13:35:02,100 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-09-26 13:35:02,100 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-09-26 13:35:02,100 INFO  impl.RaftServerImpl (ServerState.java:<init>(103)) - s0@group-1F55CC8EEEEA: ConfigurationManager, init=-1: [s0:0.0.0.0:33592, s1:0.0.0.0:40407, s2:0.0.0.0:39056], old=null, confs=<EMPTY_MAP>
2019-09-26 13:35:02,100 INFO  grpc.GrpcFactory (GrpcFactory.java:checkPooledByteBufAllocatorUseCacheForAllThreads(45)) - PERFORMANCE WARNING: useCacheForAllThreads is true that may cause Netty to create a lot garbage objects and, as a result, trigger GC.
	It is recommended to disable useCacheForAllThreads by setting -Dorg.apache.ratis.thirdparty.io.netty.allocator.useCacheForAllThreads=false in command line.
2019-09-26 13:35:02,100 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcd70f4d6e/s0] (custom)
2019-09-26 13:35:02,100 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 40407 (custom)
2019-09-26 13:35:02,101 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.corruption.policy = EXCEPTION (default)
2019-09-26 13:35:02,101 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2019-09-26 13:35:02,101 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcd70f4d6e/s0/0fa0044f-b274-435a-8b58-1f55cc8eeeea does not exist. Creating ...
2019-09-26 13:35:02,101 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-26 13:35:02,101 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-09-26 13:35:02,102 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-09-26 13:35:02,102 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcd70f4d6e/s0/0fa0044f-b274-435a-8b58-1f55cc8eeeea
2019-09-26 13:35:02,102 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcd70f4d6e/s1] (custom)
2019-09-26 13:35:02,103 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - s1: addNew group-1F55CC8EEEEA:[s0:0.0.0.0:33592, s1:0.0.0.0:40407, s2:0.0.0.0:39056] returns group-1F55CC8EEEEA:java.util.concurrent.CompletableFuture@21822af4[Not completed]
2019-09-26 13:35:02,103 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(330)) - newRaftServer: s2, group-1F55CC8EEEEA:[s0:0.0.0.0:33592, s1:0.0.0.0:40407, s2:0.0.0.0:39056], format? true
2019-09-26 13:35:02,103 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(95)) - s1: new RaftServerImpl for group-1F55CC8EEEEA:[s0:0.0.0.0:33592, s1:0.0.0.0:40407, s2:0.0.0.0:39056] with LogStateMachine:uninitialized
2019-09-26 13:35:02,103 TRACE util.FileUtils (FileUtils.java:deleteFully(88)) - deleteFully target/test/data/edf3c5cf/MiniRaftClusterWithGrpcd70f4d6e/s2
2019-09-26 13:35:02,103 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 150ms (default)
2019-09-26 13:35:02,104 TRACE util.FileUtils (FileUtils.java:deleteFully(104)) - deleteFully: target/test/data/edf3c5cf/MiniRaftClusterWithGrpcd70f4d6e/s2 does not exist.
2019-09-26 13:35:02,104 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 300ms (default)
2019-09-26 13:35:02,104 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(335)) - Formatted directory target/test/data/edf3c5cf/MiniRaftClusterWithGrpcd70f4d6e/s2
2019-09-26 13:35:02,104 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 60s (default)
2019-09-26 13:35:02,104 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.sleep.deviation.threshold = 300 (default)
2019-09-26 13:35:02,104 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-09-26 13:35:02,104 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-09-26 13:35:02,105 INFO  grpc.GrpcFactory (GrpcFactory.java:checkPooledByteBufAllocatorUseCacheForAllThreads(45)) - PERFORMANCE WARNING: useCacheForAllThreads is true that may cause Netty to create a lot garbage objects and, as a result, trigger GC.
	It is recommended to disable useCacheForAllThreads by setting -Dorg.apache.ratis.thirdparty.io.netty.allocator.useCacheForAllThreads=false in command line.
2019-09-26 13:35:02,105 INFO  impl.RaftServerImpl (ServerState.java:<init>(103)) - s1@group-1F55CC8EEEEA: ConfigurationManager, init=-1: [s0:0.0.0.0:33592, s1:0.0.0.0:40407, s2:0.0.0.0:39056], old=null, confs=<EMPTY_MAP>
2019-09-26 13:35:02,105 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 39056 (custom)
2019-09-26 13:35:02,105 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcd70f4d6e/s1] (custom)
2019-09-26 13:35:02,105 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2019-09-26 13:35:02,105 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.corruption.policy = EXCEPTION (default)
2019-09-26 13:35:02,106 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-26 13:35:02,106 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcd70f4d6e/s1/0fa0044f-b274-435a-8b58-1f55cc8eeeea does not exist. Creating ...
2019-09-26 13:35:02,106 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-09-26 13:35:02,106 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-09-26 13:35:02,106 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcd70f4d6e/s1/0fa0044f-b274-435a-8b58-1f55cc8eeeea
2019-09-26 13:35:02,107 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcd70f4d6e/s2] (custom)
2019-09-26 13:35:02,107 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - s2: addNew group-1F55CC8EEEEA:[s0:0.0.0.0:33592, s1:0.0.0.0:40407, s2:0.0.0.0:39056] returns group-1F55CC8EEEEA:java.util.concurrent.CompletableFuture@ae39c48[Not completed]
2019-09-26 13:35:02,107 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(95)) - s2: new RaftServerImpl for group-1F55CC8EEEEA:[s0:0.0.0.0:33592, s1:0.0.0.0:40407, s2:0.0.0.0:39056] with LogStateMachine:uninitialized
2019-09-26 13:35:02,108 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 150ms (default)
2019-09-26 13:35:02,108 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 300ms (default)
2019-09-26 13:35:02,108 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 60s (default)
2019-09-26 13:35:02,108 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.sleep.deviation.threshold = 300 (default)
2019-09-26 13:35:02,108 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-09-26 13:35:02,108 INFO  impl.RaftServerImpl (ServerState.java:<init>(103)) - s2@group-1F55CC8EEEEA: ConfigurationManager, init=-1: [s0:0.0.0.0:33592, s1:0.0.0.0:40407, s2:0.0.0.0:39056], old=null, confs=<EMPTY_MAP>
2019-09-26 13:35:02,108 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcd70f4d6e/s2] (custom)
2019-09-26 13:35:02,109 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.corruption.policy = EXCEPTION (default)
2019-09-26 13:35:02,109 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcd70f4d6e/s2/0fa0044f-b274-435a-8b58-1f55cc8eeeea does not exist. Creating ...
2019-09-26 13:35:02,109 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcd70f4d6e/s2/0fa0044f-b274-435a-8b58-1f55cc8eeeea
2019-09-26 13:35:02,114 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcd70f4d6e/s0/0fa0044f-b274-435a-8b58-1f55cc8eeeea/in_use.lock acquired by nodename 10855@ratis-test-j9cz4-1458154678
2019-09-26 13:35:02,114 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcd70f4d6e/s1/0fa0044f-b274-435a-8b58-1f55cc8eeeea/in_use.lock acquired by nodename 10855@ratis-test-j9cz4-1458154678
2019-09-26 13:35:02,115 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcd70f4d6e/s0/0fa0044f-b274-435a-8b58-1f55cc8eeeea/current
2019-09-26 13:35:02,114 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcd70f4d6e/s2/0fa0044f-b274-435a-8b58-1f55cc8eeeea/in_use.lock acquired by nodename 10855@ratis-test-j9cz4-1458154678
2019-09-26 13:35:02,115 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcd70f4d6e/s1/0fa0044f-b274-435a-8b58-1f55cc8eeeea/current
2019-09-26 13:35:02,115 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcd70f4d6e/s2/0fa0044f-b274-435a-8b58-1f55cc8eeeea/current
2019-09-26 13:35:02,115 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcd70f4d6e/s0/0fa0044f-b274-435a-8b58-1f55cc8eeeea/sm
2019-09-26 13:35:02,115 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcd70f4d6e/s2/0fa0044f-b274-435a-8b58-1f55cc8eeeea/sm
2019-09-26 13:35:02,115 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcd70f4d6e/s1/0fa0044f-b274-435a-8b58-1f55cc8eeeea/sm
2019-09-26 13:35:02,128 INFO  storage.RaftStorage (RaftStorage.java:format(84)) - Storage directory /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcd70f4d6e/s0/0fa0044f-b274-435a-8b58-1f55cc8eeeea has been successfully formatted.
2019-09-26 13:35:02,128 INFO  storage.RaftStorage (RaftStorage.java:format(84)) - Storage directory /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcd70f4d6e/s1/0fa0044f-b274-435a-8b58-1f55cc8eeeea has been successfully formatted.
2019-09-26 13:35:02,128 INFO  storage.RaftStorage (RaftStorage.java:format(84)) - Storage directory /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcd70f4d6e/s2/0fa0044f-b274-435a-8b58-1f55cc8eeeea has been successfully formatted.
2019-09-26 13:35:02,130 WARN  server.LogStateMachine (LogStateMachine.java:load(226)) - The snapshot info is null.
2019-09-26 13:35:02,131 WARN  server.LogStateMachine (LogStateMachine.java:load(226)) - The snapshot info is null.
2019-09-26 13:35:02,131 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.notification.no-leader.timeout = 60s (default)
2019-09-26 13:35:02,131 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.notification.no-leader.timeout = 60s (default)
2019-09-26 13:35:02,131 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-09-26 13:35:02,131 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-09-26 13:35:02,132 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.purge.gap = 1024 (default)
2019-09-26 13:35:02,132 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.purge.gap = 1024 (default)
2019-09-26 13:35:02,132 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-26 13:35:02,132 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-26 13:35:02,132 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2019-09-26 13:35:02,132 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2019-09-26 13:35:02,132 WARN  server.LogStateMachine (LogStateMachine.java:load(226)) - The snapshot info is null.
2019-09-26 13:35:02,132 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 6 (default)
2019-09-26 13:35:02,132 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 6 (default)
2019-09-26 13:35:02,133 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(172)) - new s2@group-1F55CC8EEEEA-SegmentedRaftLogWorker for RaftStorage:Storage Directory /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcd70f4d6e/s2/0fa0044f-b274-435a-8b58-1f55cc8eeeea
2019-09-26 13:35:02,133 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.notification.no-leader.timeout = 60s (default)
2019-09-26 13:35:02,133 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2019-09-26 13:35:02,133 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(172)) - new s0@group-1F55CC8EEEEA-SegmentedRaftLogWorker for RaftStorage:Storage Directory /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcd70f4d6e/s0/0fa0044f-b274-435a-8b58-1f55cc8eeeea
2019-09-26 13:35:02,133 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 4096 (default)
2019-09-26 13:35:02,133 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-09-26 13:35:02,133 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2019-09-26 13:35:02,133 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2019-09-26 13:35:02,134 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2019-09-26 13:35:02,134 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.purge.gap = 1024 (default)
2019-09-26 13:35:02,134 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2019-09-26 13:35:02,134 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 4096 (default)
2019-09-26 13:35:02,134 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-09-26 13:35:02,134 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-26 13:35:02,134 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-09-26 13:35:02,134 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2019-09-26 13:35:02,135 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-09-26 13:35:02,135 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2019-09-26 13:35:02,135 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-09-26 13:35:02,135 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2019-09-26 13:35:02,135 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2019-09-26 13:35:02,135 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 6 (default)
2019-09-26 13:35:02,135 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2019-09-26 13:35:02,135 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(132)) - s2@group-1F55CC8EEEEA-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2019-09-26 13:35:02,135 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(172)) - new s1@group-1F55CC8EEEEA-SegmentedRaftLogWorker for RaftStorage:Storage Directory /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcd70f4d6e/s1/0fa0044f-b274-435a-8b58-1f55cc8eeeea
2019-09-26 13:35:02,136 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2019-09-26 13:35:02,136 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-09-26 13:35:02,136 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.retention.file.num = -1 (default)
2019-09-26 13:35:02,136 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2019-09-26 13:35:02,136 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 60s (default)
2019-09-26 13:35:02,136 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-09-26 13:35:02,136 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 4096 (default)
2019-09-26 13:35:02,136 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-09-26 13:35:02,137 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2019-09-26 13:35:02,137 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-09-26 13:35:02,137 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2019-09-26 13:35:02,137 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2019-09-26 13:35:02,137 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2019-09-26 13:35:02,137 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(132)) - s0@group-1F55CC8EEEEA-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2019-09-26 13:35:02,137 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-09-26 13:35:02,138 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2019-09-26 13:35:02,138 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-09-26 13:35:02,138 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.retention.file.num = -1 (default)
2019-09-26 13:35:02,138 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-09-26 13:35:02,138 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 60s (default)
2019-09-26 13:35:02,138 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-09-26 13:35:02,139 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2019-09-26 13:35:02,139 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(132)) - s1@group-1F55CC8EEEEA-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2019-09-26 13:35:02,139 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2019-09-26 13:35:02,140 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.retention.file.num = -1 (default)
2019-09-26 13:35:02,140 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 60s (default)
2019-09-26 13:35:02,141 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(181)) - s0@group-1F55CC8EEEEA: start as a follower, conf=-1: [s0:0.0.0.0:33592, s1:0.0.0.0:40407, s2:0.0.0.0:39056], old=null
2019-09-26 13:35:02,141 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s0@group-1F55CC8EEEEA: changes role from      null to FOLLOWER at term 0 for startAsFollower
2019-09-26 13:35:02,141 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s0: start FollowerState
2019-09-26 13:35:02,142 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-1F55CC8EEEEA,id=s0
2019-09-26 13:35:02,147 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - s0: start RPC server
2019-09-26 13:35:02,148 INFO  server.GrpcService (GrpcService.java:startImpl(158)) - s0: GrpcService started, listening on 0.0.0.0/0.0.0.0:33592
2019-09-26 13:35:02,148 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(181)) - s1@group-1F55CC8EEEEA: start as a follower, conf=-1: [s0:0.0.0.0:33592, s1:0.0.0.0:40407, s2:0.0.0.0:39056], old=null
2019-09-26 13:35:02,148 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s1@group-1F55CC8EEEEA: changes role from      null to FOLLOWER at term 0 for startAsFollower
2019-09-26 13:35:02,149 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s1: start FollowerState
2019-09-26 13:35:02,149 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-1F55CC8EEEEA,id=s1
2019-09-26 13:35:02,152 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - s1: start RPC server
2019-09-26 13:35:02,153 INFO  server.GrpcService (GrpcService.java:startImpl(158)) - s1: GrpcService started, listening on 0.0.0.0/0.0.0.0:40407
2019-09-26 13:35:02,154 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(181)) - s2@group-1F55CC8EEEEA: start as a follower, conf=-1: [s0:0.0.0.0:33592, s1:0.0.0.0:40407, s2:0.0.0.0:39056], old=null
2019-09-26 13:35:02,154 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s2@group-1F55CC8EEEEA: changes role from      null to FOLLOWER at term 0 for startAsFollower
2019-09-26 13:35:02,154 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s2: start FollowerState
2019-09-26 13:35:02,154 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-1F55CC8EEEEA,id=s2
2019-09-26 13:35:02,158 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - s2: start RPC server
2019-09-26 13:35:02,158 INFO  server.GrpcService (GrpcService.java:startImpl(158)) - s2: GrpcService started, listening on 0.0.0.0/0.0.0.0:39056
2019-09-26 13:35:02,159 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 300ms (default)
2019-09-26 13:35:02,159 INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(86)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-1F55CC8EEEEA:t0, leader=null, voted=null, raftlog=s0@group-1F55CC8EEEEA-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:33592, s1:0.0.0.0:40407, s2:0.0.0.0:39056], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-1F55CC8EEEEA:t0, leader=null, voted=null, raftlog=s1@group-1F55CC8EEEEA-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:33592, s1:0.0.0.0:40407, s2:0.0.0.0:39056], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-1F55CC8EEEEA:t0, leader=null, voted=null, raftlog=s2@group-1F55CC8EEEEA-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:33592, s1:0.0.0.0:40407, s2:0.0.0.0:39056], old=null RUNNING
2019-09-26 13:35:02,160 WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(158)) - FAILED "waitForLeader-null-(expectLeader? true)", attempt #1/100: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-1F55CC8EEEEA:t0, leader=null, voted=null, raftlog=s0@group-1F55CC8EEEEA-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:33592, s1:0.0.0.0:40407, s2:0.0.0.0:39056], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-1F55CC8EEEEA:t0, leader=null, voted=null, raftlog=s1@group-1F55CC8EEEEA-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:33592, s1:0.0.0.0:40407, s2:0.0.0.0:39056], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-1F55CC8EEEEA:t0, leader=null, voted=null, raftlog=s2@group-1F55CC8EEEEA-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:33592, s1:0.0.0.0:40407, s2:0.0.0.0:39056], old=null RUNNING, sleep 450ms and then retry.
java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-1F55CC8EEEEA:t0, leader=null, voted=null, raftlog=s0@group-1F55CC8EEEEA-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:33592, s1:0.0.0.0:40407, s2:0.0.0.0:39056], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-1F55CC8EEEEA:t0, leader=null, voted=null, raftlog=s1@group-1F55CC8EEEEA-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:33592, s1:0.0.0.0:40407, s2:0.0.0.0:39056], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-1F55CC8EEEEA:t0, leader=null, voted=null, raftlog=s2@group-1F55CC8EEEEA-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:33592, s1:0.0.0.0:40407, s2:0.0.0.0:39056], old=null RUNNING
	at org.apache.ratis.MiniRaftCluster.newIllegalStateExceptionForNoLeaders(MiniRaftCluster.java:506)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$1(RaftTestUtil.java:90)
	at org.apache.ratis.MiniRaftCluster.getLeader(MiniRaftCluster.java:539)
	at org.apache.ratis.MiniRaftCluster.getLeader(MiniRaftCluster.java:532)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$3(RaftTestUtil.java:98)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:152)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:97)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:77)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:72)
	at org.apache.ratis.logservice.LogServiceReadWriteBase.setUpCluster(LogServiceReadWriteBase.java:116)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:24)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:298)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:292)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:748)
2019-09-26 13:35:02,309 INFO  impl.FollowerState (FollowerState.java:run(108)) - s0@group-1F55CC8EEEEA-FollowerState: change to CANDIDATE, lastRpcTime:167ms, electionTimeout:167ms
2019-09-26 13:35:02,310 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - s0: shutdown FollowerState
2019-09-26 13:35:02,310 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s0@group-1F55CC8EEEEA: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-09-26 13:35:02,310 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s0: start LeaderElection
2019-09-26 13:35:02,314 INFO  impl.FollowerState (FollowerState.java:run(108)) - s1@group-1F55CC8EEEEA-FollowerState: change to CANDIDATE, lastRpcTime:165ms, electionTimeout:165ms
2019-09-26 13:35:02,314 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - s1: shutdown FollowerState
2019-09-26 13:35:02,315 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s1@group-1F55CC8EEEEA: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-09-26 13:35:02,315 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s1: start LeaderElection
2019-09-26 13:35:02,316 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(178)) - s0@group-1F55CC8EEEEA-LeaderElection8: begin an election at term 1 for -1: [s0:0.0.0.0:33592, s1:0.0.0.0:40407, s2:0.0.0.0:39056], old=null
2019-09-26 13:35:02,319 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(178)) - s1@group-1F55CC8EEEEA-LeaderElection9: begin an election at term 1 for -1: [s0:0.0.0.0:33592, s1:0.0.0.0:40407, s2:0.0.0.0:39056], old=null
2019-09-26 13:35:02,329 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s2@group-1F55CC8EEEEA: changes role from  FOLLOWER to FOLLOWER at term 1 for recognizeCandidate:s0
2019-09-26 13:35:02,329 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - s2: shutdown FollowerState
2019-09-26 13:35:02,329 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s2: start FollowerState
2019-09-26 13:35:02,329 INFO  impl.FollowerState (FollowerState.java:run(117)) - s2@group-1F55CC8EEEEA-FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
2019-09-26 13:35:02,336 INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(56)) - s0@group-1F55CC8EEEEA-LeaderElection8: Election PASSED; received 2 response(s) [s0<-s1#0:FAIL-t1, s0<-s2#0:OK-t1] and 0 exception(s); s0@group-1F55CC8EEEEA:t1, leader=null, voted=s0, raftlog=s0@group-1F55CC8EEEEA-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:33592, s1:0.0.0.0:40407, s2:0.0.0.0:39056], old=null
2019-09-26 13:35:02,336 INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(56)) - s1@group-1F55CC8EEEEA-LeaderElection9: Election REJECTED; received 2 response(s) [s1<-s0#0:FAIL-t1, s1<-s2#0:FAIL-t1] and 0 exception(s); s1@group-1F55CC8EEEEA:t1, leader=null, voted=s1, raftlog=s1@group-1F55CC8EEEEA-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:33592, s1:0.0.0.0:40407, s2:0.0.0.0:39056], old=null
2019-09-26 13:35:02,336 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - s0: shutdown LeaderElection
2019-09-26 13:35:02,336 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s1@group-1F55CC8EEEEA: changes role from CANDIDATE to FOLLOWER at term 1 for DISCOVERED_A_NEW_TERM
2019-09-26 13:35:02,338 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s0@group-1F55CC8EEEEA: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-09-26 13:35:02,338 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - s1: shutdown LeaderElection
2019-09-26 13:35:02,338 INFO  impl.RaftServerImpl (ServerState.java:setLeader(254)) - s0@group-1F55CC8EEEEA: change Leader from null to s0 at term 1 for becomeLeader, leader elected after 206ms
2019-09-26 13:35:02,338 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s1: start FollowerState
2019-09-26 13:35:02,338 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-09-26 13:35:02,338 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-09-26 13:35:02,339 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.write.element-limit = 4096 (default)
2019-09-26 13:35:02,339 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-09-26 13:35:02,339 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-09-26 13:35:02,339 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.element-limit = 65536 (default)
2019-09-26 13:35:02,342 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2019-09-26 13:35:02,342 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-26 13:35:02,342 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2019-09-26 13:35:02,342 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2019-09-26 13:35:02,343 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-09-26 13:35:02,343 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-09-26 13:35:02,343 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2019-09-26 13:35:02,343 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-26 13:35:02,343 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2019-09-26 13:35:02,343 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2019-09-26 13:35:02,344 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-09-26 13:35:02,344 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-09-26 13:35:02,344 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s0: start LeaderState
2019-09-26 13:35:02,344 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(380)) - s0@group-1F55CC8EEEEA-SegmentedRaftLogWorker: Starting segment from index:0
2019-09-26 13:35:02,345 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(355)) - s0@group-1F55CC8EEEEA: set configuration 0: [s0:0.0.0.0:33592, s1:0.0.0.0:40407, s2:0.0.0.0:39056], old=null at 0
2019-09-26 13:35:02,347 INFO  impl.RaftServerImpl (ServerState.java:setLeader(254)) - s1@group-1F55CC8EEEEA: change Leader from null to s0 at term 1 for appendEntries, leader elected after 214ms
2019-09-26 13:35:02,347 INFO  impl.RaftServerImpl (ServerState.java:setLeader(254)) - s2@group-1F55CC8EEEEA: change Leader from null to s0 at term 1 for appendEntries, leader elected after 216ms
2019-09-26 13:35:02,350 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(355)) - s2@group-1F55CC8EEEEA: set configuration 0: [s0:0.0.0.0:33592, s1:0.0.0.0:40407, s2:0.0.0.0:39056], old=null at 0
2019-09-26 13:35:02,350 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(355)) - s1@group-1F55CC8EEEEA: set configuration 0: [s0:0.0.0.0:33592, s1:0.0.0.0:40407, s2:0.0.0.0:39056], old=null at 0
2019-09-26 13:35:02,350 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(380)) - s2@group-1F55CC8EEEEA-SegmentedRaftLogWorker: Starting segment from index:0
2019-09-26 13:35:02,350 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(380)) - s1@group-1F55CC8EEEEA-SegmentedRaftLogWorker: Starting segment from index:0
2019-09-26 13:35:02,492 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(569)) - s0@group-1F55CC8EEEEA-SegmentedRaftLogWorker: created new log segment /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcd70f4d6e/s0/0fa0044f-b274-435a-8b58-1f55cc8eeeea/current/log_inprogress_0
2019-09-26 13:35:02,492 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(569)) - s2@group-1F55CC8EEEEA-SegmentedRaftLogWorker: created new log segment /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcd70f4d6e/s2/0fa0044f-b274-435a-8b58-1f55cc8eeeea/current/log_inprogress_0
2019-09-26 13:35:02,492 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(569)) - s1@group-1F55CC8EEEEA-SegmentedRaftLogWorker: created new log segment /workdir/ratis-logservice/target/test/data/edf3c5cf/MiniRaftClusterWithGrpcd70f4d6e/s1/0fa0044f-b274-435a-8b58-1f55cc8eeeea/current/log_inprogress_0
2019-09-26 13:35:02,611 INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(101)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-1F55CC8EEEEA:t1, leader=s0, voted=s0, raftlog=s0@group-1F55CC8EEEEA-SegmentedRaftLog:OPENED:c0,f0,i0, conf=0: [s0:0.0.0.0:33592, s1:0.0.0.0:40407, s2:0.0.0.0:39056], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-1F55CC8EEEEA:t1, leader=s0, voted=s1, raftlog=s1@group-1F55CC8EEEEA-SegmentedRaftLog:OPENED:c0,f0,i0, conf=0: [s0:0.0.0.0:33592, s1:0.0.0.0:40407, s2:0.0.0.0:39056], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-1F55CC8EEEEA:t1, leader=s0, voted=s0, raftlog=s2@group-1F55CC8EEEEA-SegmentedRaftLog:OPENED:c0,f0,i0, conf=0: [s0:0.0.0.0:33592, s1:0.0.0.0:40407, s2:0.0.0.0:39056], old=null RUNNING
2019-09-26 13:35:02,676 INFO  logservice.LogServiceReadWriteBase (LogServiceReadWriteBase.java:testLogServiceReadWrite(138)) - last id 0
2019-09-26 13:35:02,694 INFO  logservice.LogServiceReadWriteBase (LogServiceReadWriteBase.java:testLogServiceReadWrite(143)) - ids [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
2019-09-26 13:35:02,702 INFO  logservice.LogServiceReadWriteBase (LogServiceReadWriteBase.java:testLogServiceReadWrite(150)) - last id 1
2019-09-26 13:35:02,715 INFO  logservice.LogServiceReadWriteBase (LogServiceReadWriteBase.java:testLogServiceReadWrite(154)) - start id 0
2019-09-26 13:35:02,721 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(700)) - ************************************************************** 
2019-09-26 13:35:02,722 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(701)) - *** 
2019-09-26 13:35:02,722 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(702)) - ***     Stopping MiniRaftClusterWithGrpc
2019-09-26 13:35:02,722 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(703)) - *** 
2019-09-26 13:35:02,722 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(704)) - ************************************************************** 
2019-09-26 13:35:02,722 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(705)) - printing ALL groups
  s0:  RUNNING    LEADER s0@group-1F55CC8EEEEA:t1, leader=s0, voted=s0, raftlog=s0@group-1F55CC8EEEEA-SegmentedRaftLog:OPENED:c2,f2,i2, conf=0: [s0:0.0.0.0:33592, s1:0.0.0.0:40407, s2:0.0.0.0:39056], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-1F55CC8EEEEA:t1, leader=s0, voted=s1, raftlog=s1@group-1F55CC8EEEEA-SegmentedRaftLog:OPENED:c1,f2,i2, conf=0: [s0:0.0.0.0:33592, s1:0.0.0.0:40407, s2:0.0.0.0:39056], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-1F55CC8EEEEA:t1, leader=s0, voted=s0, raftlog=s2@group-1F55CC8EEEEA-SegmentedRaftLog:OPENED:c1,f2,i2, conf=0: [s0:0.0.0.0:33592, s1:0.0.0.0:40407, s2:0.0.0.0:39056], old=null RUNNING
2019-09-26 13:35:02,723 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - s0: close
2019-09-26 13:35:02,724 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - s2: close
2019-09-26 13:35:02,725 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(247)) - s0@group-1F55CC8EEEEA: shutdown
2019-09-26 13:35:02,723 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - s1: close
2019-09-26 13:35:02,725 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-1F55CC8EEEEA,id=s0
2019-09-26 13:35:02,725 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(247)) - s2@group-1F55CC8EEEEA: shutdown
2019-09-26 13:35:02,726 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - s0: shutdown LeaderState
2019-09-26 13:35:02,726 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(247)) - s1@group-1F55CC8EEEEA: shutdown
2019-09-26 13:35:02,727 WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(143)) - s0@group-1F55CC8EEEEA->s1-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2019-09-26 13:35:02,726 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-1F55CC8EEEEA,id=s2
2019-09-26 13:35:02,727 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-1F55CC8EEEEA,id=s1
2019-09-26 13:35:02,728 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - s1: shutdown FollowerState
2019-09-26 13:35:02,727 WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(143)) - s0@group-1F55CC8EEEEA->s2-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2019-09-26 13:35:02,727 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(202)) - s0@group-1F55CC8EEEEA-PendingRequests: sendNotLeaderResponses
2019-09-26 13:35:02,729 INFO  impl.FollowerState (FollowerState.java:run(117)) - s1@group-1F55CC8EEEEA-FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
2019-09-26 13:35:02,729 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(136)) - s1@group-1F55CC8EEEEA-StateMachineUpdater: set stopIndex = 1
2019-09-26 13:35:02,731 INFO  impl.RaftServerImpl (ServerState.java:close(386)) - s1@group-1F55CC8EEEEA: closes. applyIndex: 1
2019-09-26 13:35:02,729 INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(113)) - s1: Completed APPEND_ENTRIES, lastRequest: s0->s1#7-t1, previous=(t:1, i:1), leaderCommit=1, initializing? false, entries: size=1, first=(t:1, i:2), METADATAENTRY(c1)
2019-09-26 13:35:02,732 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(313)) - s1@group-1F55CC8EEEEA-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-09-26 13:35:02,728 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - s2: shutdown FollowerState
2019-09-26 13:35:02,732 INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(293)) - s0@group-1F55CC8EEEEA->s1-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2019-09-26 13:35:02,732 INFO  impl.FollowerState (FollowerState.java:run(117)) - s2@group-1F55CC8EEEEA-FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
2019-09-26 13:35:02,732 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(136)) - s2@group-1F55CC8EEEEA-StateMachineUpdater: set stopIndex = 1
2019-09-26 13:35:02,731 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(136)) - s0@group-1F55CC8EEEEA-StateMachineUpdater: set stopIndex = 2
2019-09-26 13:35:02,730 INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(113)) - s2: Completed APPEND_ENTRIES, lastRequest: s0->s2#7-t1, previous=(t:1, i:1), leaderCommit=1, initializing? false, entries: size=1, first=(t:1, i:2), METADATAENTRY(c1)
2019-09-26 13:35:02,734 INFO  impl.RaftServerImpl (ServerState.java:close(386)) - s0@group-1F55CC8EEEEA: closes. applyIndex: 2
2019-09-26 13:35:02,734 INFO  impl.FollowerInfo (FollowerInfo.java:lambda$new$0(51)) - s0@group-1F55CC8EEEEA->s1: nextIndex: updateUnconditionally 3 -> 2
2019-09-26 13:35:02,734 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(228)) - s1@group-1F55CC8EEEEA-SegmentedRaftLogWorker close()
2019-09-26 13:35:02,733 INFO  impl.RaftServerImpl (ServerState.java:close(386)) - s2@group-1F55CC8EEEEA: closes. applyIndex: 1
2019-09-26 13:35:02,736 INFO  server.GrpcService (GrpcService.java:closeImpl(164)) - s1: shutdown server with port 40407 now
2019-09-26 13:35:02,736 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(313)) - s2@group-1F55CC8EEEEA-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-09-26 13:35:02,735 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(313)) - s0@group-1F55CC8EEEEA-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-09-26 13:35:02,735 INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(293)) - s0@group-1F55CC8EEEEA->s2-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2019-09-26 13:35:02,739 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(228)) - s2@group-1F55CC8EEEEA-SegmentedRaftLogWorker close()
2019-09-26 13:35:02,740 INFO  impl.FollowerInfo (FollowerInfo.java:lambda$new$0(51)) - s0@group-1F55CC8EEEEA->s2: nextIndex: updateUnconditionally 3 -> 2
2019-09-26 13:35:02,740 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(228)) - s0@group-1F55CC8EEEEA-SegmentedRaftLogWorker close()
2019-09-26 13:35:02,741 INFO  server.GrpcService (GrpcService.java:closeImpl(172)) - s1: shutdown server with port 40407 successfully
2019-09-26 13:35:02,741 INFO  server.GrpcService (GrpcService.java:closeImpl(164)) - s2: shutdown server with port 39056 now
2019-09-26 13:35:02,742 INFO  server.GrpcService (GrpcService.java:closeImpl(164)) - s0: shutdown server with port 33592 now
2019-09-26 13:35:02,743 INFO  server.GrpcService (GrpcService.java:closeImpl(172)) - s2: shutdown server with port 39056 successfully
2019-09-26 13:35:02,744 INFO  server.GrpcService (GrpcService.java:closeImpl(172)) - s0: shutdown server with port 33592 successfully
2019-09-26 13:35:02,744 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(722)) - MiniRaftClusterWithGrpc shutdown completed
